{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-045b6c52\"],{\"5ad6\":function(e,t,l){},7765:function(e,t,l){\"use strict\";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l(\"div\",[l(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.filesIsShow,expression:\"filesIsShow\"}],staticClass:\"filelist\"},[l(\"div\",{staticClass:\"head\"},[l(\"h4\",{staticClass:\"title\"},[e._v(\"文件列表\")]),l(\"div\",{staticClass:\"push_btn\"},[l(\"i\",{staticClass:\"fa fa-plus-circle fa-2\",attrs:{\"aria-hidden\":\"true\"},on:{click:function(t){return e.uploadclassify()}}},[l(\"span\",[e._v(\"上传文件\")])]),l(\"i\",{staticClass:\"fa fa-plus-circle fa-2\",attrs:{\"aria-hidden\":\"true\"},on:{click:function(t){return e.newclassify()}}},[l(\"span\",[e._v(\"新建分类\")])])])]),l(\"div\",{staticClass:\"search\"},[l(\"el-form\",{ref:\"form\",staticClass:\"search_form\",attrs:{model:e.form}},[l(\"el-form-item\",{staticClass:\"classify\",attrs:{label:\"文件分类\"}},[l(\"el-select\",{attrs:{placeholder:\"全部\"},model:{value:e.form.region,callback:function(t){e.$set(e.form,\"region\",t)},expression:\"form.region\"}},e._l(e.form.options,(function(e){return l(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),l(\"el-input\",{staticClass:\"input-with-select\",attrs:{placeholder:\"请输入内容\"},model:{value:e.form.input,callback:function(t){e.$set(e.form,\"input\",t)},expression:\"form.input\"}},[l(\"el-button\",{attrs:{slot:\"append\",icon:\"el-icon-search\"},slot:\"append\"})],1)],1)],1),l(\"div\",{staticClass:\"TableContent\"},[l(\"el-table\",{attrs:{data:e.tableData}},[l(\"el-table-column\",{attrs:{prop:\"id\",label:\"ID\",width:\"180\"}}),l(\"el-table-column\",{attrs:{prop:\"file_name\",label:\"文件名\",width:\"180\"}}),l(\"el-table-column\",{attrs:{prop:\"file_describe\",label:\"文件描述\",width:\"260\"}}),l(\"el-table-column\",{attrs:{prop:\"file_size\",label:\"文件大小\",width:\"180\"}}),l(\"el-table-column\",{attrs:{prop:\"create_time\",label:\"更新时间\",width:\"180\"}}),l(\"el-table-column\",{attrs:{prop:\"class_id\",label:\"文件分类\",width:\"180\"}}),l(\"el-table-column\",{attrs:{prop:\"uid\",label:\"上传人员\",width:\"180\"}}),l(\"el-table-column\",{attrs:{label:\"操作\",width:\"180\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[l(\"el-button\",{staticStyle:{color:\"#666ee8\"},attrs:{type:\"text\",size:\"small\"},on:{click:function(l){return e.handleClick(t.row)}}},[e._v(\"下载\")]),l(\"el-button\",{staticStyle:{color:\"#1e1e1e\"},attrs:{type:\"text\",size:\"small\"},nativeOn:{click:function(l){return l.preventDefault(),e.deleteRow(t.$index,e.tableData)}}},[e._v(\" 删除 \")])]}}])})],1)],1),l(\"div\",{staticClass:\"staffpag\"},[l(\"div\",{staticClass:\"block\"},[l(\"el-pagination\",{attrs:{\"current-page\":e.currentPage,\"page-sizes\":[8,10,20],\"page-size\":8,layout:\"total, sizes, prev, pager, next, jumper\",total:e.tableData.length},on:{\"size-change\":e.handleSizeChange,\"current-change\":e.handleCurrentChange}})],1)])]),l(\"add-files\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.addIsShow,expression:\"addIsShow\"}],on:{newly:function(t){return e.newclassify()}}}),l(\"el-dialog\",{attrs:{title:\"上传文件\",visible:e.dialogVisible},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[l(\"el-form\",{staticClass:\"demo-ruleForm\",attrs:{model:e.ruleForm,\"label-width\":\"100px\"}},[l(\"el-form-item\",{attrs:{label:\"文件标题\",prop:\"name\"}},[l(\"el-input\",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,\"name\",t)},expression:\"ruleForm.name\"}})],1),l(\"el-form-item\",{attrs:{label:\"文件分类\",prop:\"region\"}},[l(\"el-select\",{attrs:{placeholder:\"请选择\"},on:{change:e.selchang},model:{value:e.editselvalue,callback:function(t){e.editselvalue=t},expression:\"editselvalue\"}},[l(\"el-option\",{attrs:{label:\"作为顶级\",value:0}}),e._l(e.editseldata,(function(t){return[l(\"el-option\",{key:t.id,attrs:{label:t.class_name,value:t.id}}),t._child?e._l(t._child,(function(e){return l(\"el-option\",{key:e.id,attrs:{label:\"|——\"+e.class_name,value:e.id}})})):e._e()]}))],2)],1),l(\"el-upload\",{staticClass:\"upload-demo\",attrs:{action:\"http://bt1.wlqqlp.com:8082/api/srk/event_uploadfiles\",\"on-preview\":e.handlePreview,\"on-remove\":e.handleRemove,\"before-remove\":e.beforeRemove,multiple:\"\",limit:3,\"on-exceed\":e.handleExceed,\"file-list\":e.fileList}},[l(\"el-button\",{attrs:{size:\"small\",type:\"primary\"}},[e._v(\"点击上传\")]),l(\"div\",{staticClass:\"el-upload__tip\",attrs:{slot:\"tip\"},slot:\"tip\"},[e._v(\" 只能上传jpg/png文件，且不超过500kb \")])],1),l(\"el-form-item\",{attrs:{label:\"文件描述\",prop:\"desc\"}},[l(\"el-input\",{attrs:{type:\"textarea\"},model:{value:e.ruleForm.desc,callback:function(t){e.$set(e.ruleForm,\"desc\",t)},expression:\"ruleForm.desc\"}})],1),l(\"el-form-item\",[l(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.submitForm}},[e._v(\"上传\")]),l(\"el-button\",{on:{click:e.resetForm}},[e._v(\"取消\")])],1)],1)],1)],1)},i=[],o=(l(\"99af\"),l(\"a434\"),l(\"b0c0\"),l(\"5ad6\"),function(){var e=this,t=e.$createElement,l=e._self._c||t;return l(\"div\",{staticClass:\"newlyFiles\"},[l(\"div\",{staticClass:\"head\"},[l(\"h4\",{staticClass:\"title\"},[e._v(\"编辑分类\")]),l(\"div\",{staticClass:\"push_btn\"},[l(\"i\",{staticClass:\"fa fa-plus-circle fa-2\",attrs:{\"aria-hidden\":\"true\"},on:{click:function(t){e.dialogFormVisible=!0}}},[l(\"span\",[e._v(\"新建分类\")])]),l(\"span\",{staticClass:\"back\",on:{click:function(t){return e.back()}}},[e._v(\"返回文件列表\")])])]),l(\"div\",{staticClass:\"newlyContent\"},[l(\"div\",{staticClass:\"TableContent\"},[l(\"el-table\",{attrs:{data:e.tableData,\"row-key\":\"id\",\"default-expand-all\":\"\",\"tree-props\":{children:\"_child\",hasChildren:\"hasChildren\"}}},[l(\"el-table-column\",{attrs:{prop:\"weight\",label:\"权重\"}}),l(\"el-table-column\",{attrs:{prop:\"class_name\",label:\"分类名称\",width:\"190\"}}),l(\"el-table-column\",{attrs:{prop:\"file_num\",label:\"文件数量\",width:\"190\"}}),l(\"el-table-column\",{attrs:{prop:\"update_time\",label:\"更新时间\",width:\"190\"}}),l(\"el-table-column\",{attrs:{label:\"状态\",width:\"190\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[l(\"el-switch\",{attrs:{\"active-value\":1,\"inactive-value\":0,\"active-color\":\"#02538C\",\"inactive-color\":\"#B9B9B9\"},on:{change:function(l){return e.changeSwitch(l,t.row,t.row.id)}},model:{value:t.row.status,callback:function(l){e.$set(t.row,\"status\",l)},expression:\"scope.row.status\"}})]}}])}),l(\"el-table-column\",{attrs:{prop:\"uid\",label:\"修改人员\",width:\"190\"}}),l(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[l(\"el-button\",{staticStyle:{color:\"#666ee8\"},attrs:{type:\"text\",size:\"small\"},on:{click:function(l){return e.handleClick(t.row.id)}}},[e._v(\"编辑\")]),l(\"el-button\",{staticStyle:{color:\"#1e1e1e\"},attrs:{type:\"text\",size:\"small\"},on:{click:function(l){return e.deleteRow(t.row.id)}}},[e._v(\" 删除 \")])]}}])})],1)],1)]),l(\"div\",{staticClass:\"pagenum\"},[l(\"el-pagination\",{attrs:{\"page-size\":20,\"pager-count\":11,layout:\"prev, pager, next\",total:1e3}})],1),l(\"el-dialog\",{staticClass:\"newlyClassify\",attrs:{title:\"添加分类\",visible:e.dialogFormVisible},on:{\"update:visible\":function(t){e.dialogFormVisible=t}}},[l(\"el-form\",{attrs:{model:e.form}},[l(\"el-form-item\",{attrs:{label:\"上级分类\",required:\"\",\"label-width\":e.formLabelWidth}},[l(\"el-select\",{attrs:{placeholder:\"请选择\"},on:{change:e.selchang},model:{value:e.editselvalue,callback:function(t){e.editselvalue=t},expression:\"editselvalue\"}},[l(\"el-option\",{attrs:{label:\"作为顶级\",value:0}}),e._l(e.editseldata,(function(t){return[l(\"el-option\",{key:t.id,attrs:{label:t.class_name,value:t.id}}),t._child?e._l(t._child,(function(e){return l(\"el-option\",{key:e.id,attrs:{label:\"|——\"+e.class_name,value:e.id}})})):e._e()]}))],2),l(\"span\",{staticClass:\"one_level\"},[e._v(\"一级分类选择“无”\")])],1),l(\"el-form-item\",{attrs:{label:\"分类标题\",required:\"\",\"label-width\":e.formLabelWidth}},[l(\"el-input\",{staticStyle:{width:\"360px\"},attrs:{placeholder:\"请输入分类标题\"},model:{value:e.form.title,callback:function(t){e.$set(e.form,\"title\",t)},expression:\"form.title\"}})],1),l(\"el-form-item\",{attrs:{label:\"分类权重\",required:\"\",\"label-width\":e.formLabelWidth}},[l(\"el-input\",{staticStyle:{width:\"360px\"},attrs:{placeholder:\"默认0，越大越靠前\"},model:{value:e.form.weight,callback:function(t){e.$set(e.form,\"weight\",t)},expression:\"form.weight\"}})],1)],1),l(\"div\",{staticClass:\"dialog-footer foot\",attrs:{slot:\"footer\"},slot:\"footer\"},[l(\"el-button\",{staticStyle:{\"border-color\":\"#0079fe\",color:\"#0079fe\"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(\"取 消\")]),l(\"el-button\",{staticStyle:{background:\"#0079fe\",color:\"#ffffff\"},attrs:{type:\"primary\"},on:{click:e.dialogForm}},[e._v(\"确 定 \")])],1)],1),l(\"el-dialog\",{staticClass:\"newlyClassify\",attrs:{title:\"添加分类\",visible:e.dialogVisible},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[l(\"el-form\",{attrs:{model:e.form}},[l(\"el-form-item\",{attrs:{label:\"上级分类\",required:\"\",\"label-width\":e.formLabelWidth}},[l(\"el-select\",{attrs:{placeholder:\"请选择\"},on:{change:e.selchang},model:{value:e.editselvalue,callback:function(t){e.editselvalue=t},expression:\"editselvalue\"}},[l(\"el-option\",{attrs:{label:\"作为顶级\",value:0}}),e._l(e.editseldata,(function(t){return[l(\"el-option\",{key:t.id,attrs:{label:t.class_name,value:t.id}}),t._child?e._l(t._child,(function(e){return l(\"el-option\",{key:e.id,attrs:{label:\"|——\"+e.class_name,value:e.id}})})):e._e()]}))],2),l(\"span\",{staticClass:\"one_level\"},[e._v(\"一级分类选择“无”\")])],1),l(\"el-form-item\",{attrs:{label:\"分类标题\",required:\"\",\"label-width\":e.formLabelWidth}},[l(\"el-input\",{staticStyle:{width:\"360px\"},attrs:{autocomplete:\"off\"},model:{value:e.edittitle,callback:function(t){e.edittitle=t},expression:\"edittitle\"}})],1),l(\"el-form-item\",{attrs:{label:\"分类权重\",required:\"\",\"label-width\":e.formLabelWidth}},[l(\"el-input\",{staticStyle:{width:\"360px\"},attrs:{autocomplete:\"off\"},model:{value:e.editweight,callback:function(t){e.editweight=t},expression:\"editweight\"}})],1)],1),l(\"div\",{staticClass:\"dialog-footer foot\",attrs:{slot:\"footer\"},slot:\"footer\"},[l(\"el-button\",{staticStyle:{\"border-color\":\"#0079fe\",color:\"#0079fe\"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(\"取 消\")]),l(\"el-button\",{staticStyle:{background:\"#0079fe\",color:\"#ffffff\"},attrs:{type:\"primary\"},on:{click:e.dialogeditsave}},[e._v(\"确 定 \")])],1)],1)],1)}),s=[],n=l(\"6022\"),r={inject:[\"reload\"],components:{},props:{},data:function(){return{dialogFormVisible:!1,form:{title:\"\",weight:\"\"},formLabelWidth:\"120px\",dialogVisible:!1,tableData:[],editseldata:[],editselvalue:0,edittitle:\"\",editweight:\"\",editid:\"\"}},created:function(){var e=this;n[\"a\"].doclist().then((function(t){console.log(t),e.tableData=t.data})),n[\"a\"].docaddtree().then((function(t){console.log(t),e.editseldata=t.data}))},methods:{selchang:function(){console.log(this.editselvalue)},dialogForm:function(){var e=this,t={class_name:this.form.title,weight:this.form.weight,pid:this.editselvalue};n[\"a\"].docadd(t).then((function(t){console.log(t),\"20010\"==t.code?e.reload():alert(t.msg)}))},changeSwitch:function(e,t,l){var a={id:l};console.log(a),n[\"a\"].docstatu(a).then((function(e){console.log(e)})),console.log(t.status),1==t.status?this.$message({type:\"success\",message:\"文件启用成功\"}):this.$message.error(\"文件停用成功\")},back:function(){this.$emit(\"newly\")},deleteRow:function(e){var t=this;console.log(e);var l={id:e};console.log(l),n[\"a\"].docdel(l).then((function(e){console.log(e),t.reload()}))},handleClick:function(e){var t=this;console.log(e),this.dialogVisible=!this.dialogVisible;var l={id:e};n[\"a\"].docedit(l).then((function(e){console.log(e),t.edittitle=e.data[0].class_name,t.editweight=e.data[0].weight,t.editselvalue=e.data[0].pid,t.editid=e.data[0].id}))},dialogeditsave:function(){var e=this,t={weight:this.editweight,pid:this.editselvalue,class_name:this.edittitle,id:this.editid};n[\"a\"].doceditsave(t).then((function(t){console.log(t),\"20010\"==t.code&&e.reload()}))}}},c=r,d=l(\"2877\"),u=Object(d[\"a\"])(c,o,s,!1,null,null,null),f=u.exports,m={components:{AddFiles:f},props:{},data:function(){return{currentPage:1,dialogVisible:!1,ruleForm:{name:\"\",region:\"\",desc:\"\"},editseldata:[],editselvalue:0,fileList:[],rules:{name:[{required:!0,message:\"请输入文件标题\",trigger:\"blur\"},{min:2,max:20,message:\"长度在 2 到 20 个字符\",trigger:\"blur\"}],region:[{required:!0,message:\"请选择分类\",trigger:\"change\"}]},form:{input:\"\",region:\"\"},tableData:[],filesIsShow:!0,addIsShow:!1}},created:function(){var e=this;n[\"a\"].filelist().then((function(t){console.log(t),e.tableData=t.data})),n[\"a\"].filetree().then((function(t){console.log(t),e.editseldata=t.data}))},methods:{submitForm:function(){var e={file_name:this.ruleForm.name,file_describe:this.ruleForm.desc,class_id:this.editselvalue};n[\"a\"].fileupload(e).then((function(e){console.log(e)}))},resetForm:function(){},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},beforeRemove:function(e,t){return this.$confirm(\"确定移除 \".concat(e.name,\"？\"))},handleExceed:function(e,t){this.$message.warning(\"当前限制选择 3 个文件，本次选择了 \".concat(e.length,\" 个文件，共选择了 \").concat(e.length+t.length,\" 个文件\"))},selchang:function(){console.log(this.editselvalue)},deleteRow:function(e,t){t.splice(e,1)},handleClick:function(e){console.log(e)},uploadclassify:function(){this.dialogVisible=!0},newclassify:function(){this.filesIsShow=!this.filesIsShow,this.addIsShow=!this.addIsShow},handleSizeChange:function(e){console.log(\"每页 \".concat(e,\" 条\"))},handleCurrentChange:function(e){console.log(\"当前页: \".concat(e))}}},h=m,p=Object(d[\"a\"])(h,a,i,!1,null,null,null);t[\"default\"]=p.exports}}]);","extractedComments":[]}