{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\ts-loader\\index.js??ref--13-2!C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\src\\router\\permission.ts","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\src\\router\\permission.ts","mtime":1609551113244},{"path":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5kZWZpbmUtcHJvcGVydGllcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5kZWZpbmUtcHJvcGVydHkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkM6XFxVc2Vyc1xcQWRtaW5pc3RyYXRvclxcRGVza3RvcFxcMjAyMVx1NTQwRVx1NTNGMFxcU2VjdXJpdHktSW5mb3JtYXRpb25cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBoYXNQZXJtaXNzaW9uKHJvdXRlLCByb2xlKSB7CiAgaWYgKHJvdXRlLm1ldGEgJiYgcm91dGUubWV0YS5yb2xlcykgewogICAgcmV0dXJuIHJvdXRlLm1ldGEucm9sZXMuaW5kZXhPZihyb2xlKSAhPT0gLTE7CiAgfSBlbHNlIHsKICAgIHJldHVybiB0cnVlOwogIH0KfSAvLyDor6XlpITnmoRyb2xl5Li655m75b2V6KeS6Imy77yM5Y+v5qC55o2u5a6e6ZmF6ZyA6KaB6L+b6KGM5Yqo5oCB55Sf5oiQCgoKZXhwb3J0IHZhciBnZW5lcmF0ZVJvdXRlcyA9IGZ1bmN0aW9uIGdlbmVyYXRlUm91dGVzKGFzeW5jUm91dGVzLCByb2xlKSB7CiAgdmFyIHJlcyA9IFtdOwogIGFzeW5jUm91dGVzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHZhciBtaWQgPSBfb2JqZWN0U3ByZWFkKHt9LCBpdGVtKTsKCiAgICBpZiAoaGFzUGVybWlzc2lvbihtaWQsIHJvbGUpKSB7CiAgICAgIGlmIChtaWQuY2hpbGRyZW4pIHsKICAgICAgICBtaWQuY2hpbGRyZW4gPSBnZW5lcmF0ZVJvdXRlcyhtaWQuY2hpbGRyZW4sIHJvbGUpOyAvLyDlr7nlrZDot6/nlLHov5vooYzpgJLlvZLvvIzpmLLmraLpgZfmvI/vvIjlkIzml7bor6Xpg6jliIbmlK/mjIHlpJrnuqflrZDot6/nlLHnmoTpgJLlvZLnlJ/miJDvvIkKICAgICAgfQoKICAgICAgcmVzLnB1c2gobWlkKTsKICAgIH0KICB9KTsKICByZXR1cm4gcmVzOwp9Ow=="},{"version":3,"sources":["C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\src\\router\\permission.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA,SAAS,aAAT,CAAuB,KAAvB,EAA8B,IAA9B,EAAkC;AAChC,MAAI,KAAK,CAAC,IAAN,IAAc,KAAK,CAAC,IAAN,CAAW,KAA7B,EAAoC;AAClC,WAAO,KAAK,CAAC,IAAN,CAAW,KAAX,CAAiB,OAAjB,CAAyB,IAAzB,MAAmC,CAAC,CAA3C;AACD,GAFD,MAEO;AACL,WAAO,IAAP;AACD;AACF,C,CAED;;;AACA,OAAO,IAAM,cAAc,GAAG,SAAjB,cAAiB,CAAS,WAAT,EAAiC,IAAjC,EAA4C;AACxE,MAAM,GAAG,GAAc,EAAvB;AACA,EAAA,WAAW,CAAC,OAAZ,CAAoB,UAAA,IAAI,EAAG;AACzB,QAAM,GAAG,qBAAO,IAAP,CAAT;;AACA,QAAI,aAAa,CAAC,GAAD,EAAM,IAAN,CAAjB,EAA8B;AAC5B,UAAI,GAAG,CAAC,QAAR,EAAkB;AAChB,QAAA,GAAG,CAAC,QAAJ,GAAe,cAAc,CAAC,GAAG,CAAC,QAAL,EAAe,IAAf,CAA7B,CADgB,CACmC;AACpD;;AACD,MAAA,GAAG,CAAC,IAAJ,CAAS,GAAT;AACD;AACF,GARD;AASA,SAAO,GAAP;AACD,CAZM","sourcesContent":["function hasPermission(route, role) {\r\n  if (route.meta && route.meta.roles) {\r\n    return route.meta.roles.indexOf(role) !== -1\r\n  } else {\r\n    return true\r\n  }\r\n}\r\n\r\n// 该处的role为登录角色，可根据实际需要进行动态生成\r\nexport const generateRoutes = function(asyncRoutes:Array<any>, role:string): Array<any> {\r\n  const res:Array<any> = []\r\n  asyncRoutes.forEach(item => {\r\n    const mid = {...item}\r\n    if (hasPermission(mid, role)) {\r\n      if (mid.children) {\r\n        mid.children = generateRoutes(mid.children, role)  // 对子路由进行递归，防止遗漏（同时该部分支持多级子路由的递归生成）\r\n      }\r\n      res.push(mid)\r\n    }\r\n  })\r\n  return res\r\n}"],"sourceRoot":""}]}