{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\node_modules\\ts-loader\\index.js??ref--13-2!C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\src\\router\\permission.ts","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\src\\router\\permission.ts","mtime":1609551113244},{"path":"C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5kZWZpbmUtcHJvcGVydGllcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5kZWZpbmUtcHJvcGVydHkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkM6XFxVc2Vyc1xcQWRtaW5pc3RyYXRvclxcRGVza3RvcFxcMjJcXGh4ajIyMjEtU2VjdXJpdHktSW5mb3JtYXRpb24xXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gaGFzUGVybWlzc2lvbihyb3V0ZSwgcm9sZSkgewogIGlmIChyb3V0ZS5tZXRhICYmIHJvdXRlLm1ldGEucm9sZXMpIHsKICAgIHJldHVybiByb3V0ZS5tZXRhLnJvbGVzLmluZGV4T2Yocm9sZSkgIT09IC0xOwogIH0gZWxzZSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0gLy8g6K+l5aSE55qEcm9sZeS4uueZu+W9leinkuiJsu+8jOWPr+agueaNruWunumZhemcgOimgei/m+ihjOWKqOaAgeeUn+aIkAoKCmV4cG9ydCB2YXIgZ2VuZXJhdGVSb3V0ZXMgPSBmdW5jdGlvbiBnZW5lcmF0ZVJvdXRlcyhhc3luY1JvdXRlcywgcm9sZSkgewogIHZhciByZXMgPSBbXTsKICBhc3luY1JvdXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICB2YXIgbWlkID0gX29iamVjdFNwcmVhZCh7fSwgaXRlbSk7CgogICAgaWYgKGhhc1Blcm1pc3Npb24obWlkLCByb2xlKSkgewogICAgICBpZiAobWlkLmNoaWxkcmVuKSB7CiAgICAgICAgbWlkLmNoaWxkcmVuID0gZ2VuZXJhdGVSb3V0ZXMobWlkLmNoaWxkcmVuLCByb2xlKTsgLy8g5a+55a2Q6Lev55Sx6L+b6KGM6YCS5b2S77yM6Ziy5q2i6YGX5ryP77yI5ZCM5pe26K+l6YOo5YiG5pSv5oyB5aSa57qn5a2Q6Lev55Sx55qE6YCS5b2S55Sf5oiQ77yJCiAgICAgIH0KCiAgICAgIHJlcy5wdXNoKG1pZCk7CiAgICB9CiAgfSk7CiAgcmV0dXJuIHJlczsKfTs="},{"version":3,"sources":["C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\src\\router\\permission.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA,SAAS,aAAT,CAAuB,KAAvB,EAA8B,IAA9B,EAAkC;AAChC,MAAI,KAAK,CAAC,IAAN,IAAc,KAAK,CAAC,IAAN,CAAW,KAA7B,EAAoC;AAClC,WAAO,KAAK,CAAC,IAAN,CAAW,KAAX,CAAiB,OAAjB,CAAyB,IAAzB,MAAmC,CAAC,CAA3C;AACD,GAFD,MAEO;AACL,WAAO,IAAP;AACD;AACF,C,CAED;;;AACA,OAAO,IAAM,cAAc,GAAG,SAAjB,cAAiB,CAAS,WAAT,EAAiC,IAAjC,EAA4C;AACxE,MAAM,GAAG,GAAc,EAAvB;AACA,EAAA,WAAW,CAAC,OAAZ,CAAoB,UAAA,IAAI,EAAG;AACzB,QAAM,GAAG,qBAAO,IAAP,CAAT;;AACA,QAAI,aAAa,CAAC,GAAD,EAAM,IAAN,CAAjB,EAA8B;AAC5B,UAAI,GAAG,CAAC,QAAR,EAAkB;AAChB,QAAA,GAAG,CAAC,QAAJ,GAAe,cAAc,CAAC,GAAG,CAAC,QAAL,EAAe,IAAf,CAA7B,CADgB,CACmC;AACpD;;AACD,MAAA,GAAG,CAAC,IAAJ,CAAS,GAAT;AACD;AACF,GARD;AASA,SAAO,GAAP;AACD,CAZM","sourcesContent":["function hasPermission(route, role) {\r\n  if (route.meta && route.meta.roles) {\r\n    return route.meta.roles.indexOf(role) !== -1\r\n  } else {\r\n    return true\r\n  }\r\n}\r\n\r\n// 该处的role为登录角色，可根据实际需要进行动态生成\r\nexport const generateRoutes = function(asyncRoutes:Array<any>, role:string): Array<any> {\r\n  const res:Array<any> = []\r\n  asyncRoutes.forEach(item => {\r\n    const mid = {...item}\r\n    if (hasPermission(mid, role)) {\r\n      if (mid.children) {\r\n        mid.children = generateRoutes(mid.children, role)  // 对子路由进行递归，防止遗漏（同时该部分支持多级子路由的递归生成）\r\n      }\r\n      res.push(mid)\r\n    }\r\n  })\r\n  return res\r\n}"],"sourceRoot":""}]}