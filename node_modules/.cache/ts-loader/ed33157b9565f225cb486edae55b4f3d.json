{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\ts-loader\\index.js??ref--13-2!C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\src\\util\\request.ts","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\src\\util\\request.ts","mtime":1610443735153},{"path":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAqIGFzIGF4aW9zIGZyb20gJ2F4aW9zJzsgLy8g6L+Z6YeM5Y+v5qC55o2u5YW35L2T5L2/55So55qEdWnnu4Tku7blupPov5vooYzmm7/mjaIKCmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsgLy8gYmFzZVVSTOagueaNruWunumZhei/m+ihjOWumuS5iQoKdmFyIGJhc2VVUkwgPSAnaHR0cDovL2J0MS53bHFxbHAuY29tOjgwODIvJzsgLy8g5Yib5bu6YXhpb3Plrp7kvosKCnZhciBzZXJ2aWNlID0gYXhpb3NbImRlZmF1bHQiXS5jcmVhdGUoewogIGJhc2VVUkw6IGJhc2VVUkwsCiAgdGltZW91dDogMTAwMDAsCiAgbWF4Q29udGVudExlbmd0aDogNDAwMAp9KTsKc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpKSB7CiAgICBjb25maWcuaGVhZGVycy50b2tlbiA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7IC8v6K6p6K+35rGC5aS05pC65bim6aqM6K+BdG9rZW4KICAgIC8vIGNvbmZpZy5oZWFkZXJzLmFkbWluID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKTsgLy8g6K6p5q+P5Liq6K+35rGC5pC65bim6Ieq5a6a5LmJdG9rZW4g6K+35qC55o2u5a6e6ZmF5oOF5Ya16Ieq6KGM5L+u5pS5CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyKSB7CiAgTWVzc2FnZSh7CiAgICBtZXNzYWdlOiBlcnIubWVzc2FnZSwKICAgIHR5cGU6ICdlcnJvcicsCiAgICBkdXJhdGlvbjogMyAqIDEwMDAKICB9KTsKICBQcm9taXNlLnJlamVjdChlcnIpOwp9KTsKc2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkgewogICAgTWVzc2FnZSh7CiAgICAgIG1lc3NhZ2U6ICJcdThCRjdcdTZDNDJcdTk1MTlcdThCRUZcdUZGMEMiLmNvbmNhdChTdHJpbmcocmVzcG9uc2Uuc3RhdHVzKSksCiAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgIGR1cmF0aW9uOiAzICogMTAwMAogICAgfSk7CiAgICByZXR1cm4gewogICAgICBjb2RlOiAxMDAKICAgIH07CiAgfSBlbHNlIHsKICAgIHZhciByZXMgPSByZXNwb25zZS5kYXRhOwoKICAgIGlmIChyZXNwb25zZS5kYXRhLnRva2VuKSB7fSAvLyBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHJlc3BvbnNlLmRhdGEudG9rZW4pCiAgICAvLyBpZiAoY29kZSA9PT0gLTEpIHsKICAgIC8vICAgTWVzc2FnZUJveC5hbGVydChtc2csIHsKICAgIC8vICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+mHjeaWsOeZu+W9lScsCiAgICAvLyAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAvLyAgIH0pLnRoZW4oKCkgPT4gewogICAgLy8gICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgIC8vICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXInKTsKICAgIC8vICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpIC8vIOS4uuS6humHjeaWsOWunuS+i+WMlnZ1ZS1yb3V0ZXLlr7nosaEg6YG/5YWNYnVnCiAgICAvLyAgIH0pCiAgICAvLyAgIHJldHVybiBQcm9taXNlLnJlamVjdCgnZXJyb3InKQogICAgLy8gfSBlbHNlIGlmIChjb2RlICE9PSAwKSB7CiAgICAvLyAgIE1lc3NhZ2UoewogICAgLy8gICAgIG1lc3NhZ2U6IG1zZyB8fCAn5pyN5Yqh5Zmo6L+U5Zue5pWw5o2u5pyJ6K+vJywKICAgIC8vICAgICB0eXBlOiAnd2FybmluZycsCiAgICAvLyAgICAgZHVyYXRpb246IDIgKiAxMDAwCiAgICAvLyAgIH0pOwogICAgLy8gfSAgIAoKCiAgICByZXR1cm4gcmVzOwogIH0KfSwgZnVuY3Rpb24gKGVycikgewogIE1lc3NhZ2UoewogICAgbWVzc2FnZTogZXJyLAogICAgdHlwZTogJ2Vycm9yJywKICAgIGR1cmF0aW9uOiAzICogMTAwMAogIH0pOwogIHJldHVybiB7CiAgICBjb2RlOiAxMDAKICB9Owp9KTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"sources":["C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\src\\util\\request.ts"],"names":[],"mappings":";AAAA,OAAO,KAAK,KAAZ,MAAuB,OAAvB,C,CAEA;;AACA,SAAS,OAAT,QAAoC,YAApC,C,CASA;;AACA,IAAM,OAAO,GAAG,6BAAhB,C,CAEA;;AACA,IAAM,OAAO,GAAG,KAAK,WAAL,CAAc,MAAd,CAAqB;AACnC,EAAA,OAAO,EAAP,OADmC;AAEnC,EAAA,OAAO,EAAE,KAF0B;AAGnC,EAAA,gBAAgB,EAAE;AAHiB,CAArB,CAAhB;AAMA,OAAO,CAAC,YAAR,CAAqB,OAArB,CAA6B,GAA7B,CAAiC,UAAC,MAAD,EAA+B;AAE9D,MAAI,cAAc,CAAC,OAAf,CAAuB,OAAvB,CAAJ,EAAqC;AAEnC,IAAA,MAAM,CAAC,OAAP,CAAe,KAAf,GAAuB,cAAc,CAAC,OAAf,CAAuB,OAAvB,CAAvB,CAFmC,CAEsB;AACzD;AAGD;;AACD,SAAO,MAAP;AACD,CAVD,EAUG,UAAC,GAAD,EAAa;AACd,EAAA,OAAO,CAAC;AACN,IAAA,OAAO,EAAE,GAAG,CAAC,OADP;AAEN,IAAA,IAAI,EAAE,OAFA;AAGN,IAAA,QAAQ,EAAE,IAAI;AAHR,GAAD,CAAP;AAKA,EAAA,OAAO,CAAC,MAAR,CAAe,GAAf;AACD,CAjBD;AAmBA,OAAO,CAAC,YAAR,CAAqB,QAArB,CAA8B,GAA9B,CAAkC,UAAC,QAAD,EAA4B;AAC5D;AACA,MAAI,QAAQ,CAAC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,IAAA,OAAO,CAAC;AACN,MAAA,OAAO,0CAAU,MAAM,CAAC,QAAQ,CAAC,MAAV,CAAhB,CADD;AAEN,MAAA,IAAI,EAAE,OAFA;AAGN,MAAA,QAAQ,EAAE,IAAI;AAHR,KAAD,CAAP;AAKA,WAAO;AAAE,MAAA,IAAI,EAAE;AAAR,KAAP;AACD,GAPD,MAOM;AACJ,QAAI,GAAG,GAAG,QAAQ,CAAC,IAAnB;;AACA,QAAI,QAAQ,CAAC,IAAT,CAAc,KAAlB,EAAyB,CAGxB,CAHD,CAEE;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,WAAO,GAAP;AACD;AACF,CAlCD,EAkCG,UAAC,GAAD,EAAa;AACd,EAAA,OAAO,CAAC;AACN,IAAA,OAAO,EAAE,GADH;AAEN,IAAA,IAAI,EAAE,OAFA;AAGN,IAAA,QAAQ,EAAE,IAAI;AAHR,GAAD,CAAP;AAKA,SAAO;AAAE,IAAA,IAAI,EAAE;AAAR,GAAP;AACD,CAzCD;AA2CA,eAAe,OAAf","sourcesContent":["import * as axios from 'axios';\r\n\r\n// 这里可根据具体使用的ui组件库进行替换\r\nimport { Message, MessageBox } from 'element-ui';\r\nimport { AxiosResponse, AxiosRequestConfig } from 'axios';\r\n\r\nexport interface AjaxResponse {\r\n  code: number;\r\n  message: string;\r\n  data: any\r\n}\r\n\r\n// baseURL根据实际进行定义\r\nconst baseURL = 'http://bt1.wlqqlp.com:8082/';\r\n\r\n// 创建axios实例\r\nconst service = axios.default.create({\r\n  baseURL,\r\n  timeout: 10000,  // 请求超时时间\r\n  maxContentLength: 4000\r\n})\r\n\r\nservice.interceptors.request.use((config: AxiosRequestConfig) => {\r\n  \r\n  if (sessionStorage.getItem('token')) {\r\n  \r\n    config.headers.token = sessionStorage.getItem('token');  //让请求头携带验证token\r\n    // config.headers.admin = localStorage.getItem('user'); // 让每个请求携带自定义token 请根据实际情况自行修改\r\n  \r\n\r\n  }\r\n  return config\r\n}, (err: any) => {\r\n  Message({\r\n    message: err.message,\r\n    type: 'error',\r\n    duration: 3 * 1000\r\n  });\r\n  Promise.reject(err)\r\n});\r\n\r\nservice.interceptors.response.use((response: AxiosResponse) => {\r\n  // console.log(response)\r\n  if (response.status !== 200) {\r\n    Message({\r\n      message: `请求错误，${String(response.status)}`,\r\n      type: 'error',\r\n      duration: 3 * 1000\r\n    });\r\n    return { code: 100 }\r\n  } else{\r\n    let res = response.data;\r\n    if (response.data.token) {\r\n      \r\n      // sessionStorage.setItem('token', response.data.token)\r\n    }\r\n    // if (code === -1) {\r\n    //   MessageBox.alert(msg, {\r\n    //     confirmButtonText: '重新登录',\r\n    //     type: 'warning'\r\n    //   }).then(() => {\r\n    //       sessionStorage.removeItem('token');\r\n    //       sessionStorage.removeItem('user');\r\n    //       location.reload() // 为了重新实例化vue-router对象 避免bug\r\n    //   })\r\n    //   return Promise.reject('error')\r\n    // } else if (code !== 0) {\r\n    //   Message({\r\n    //     message: msg || '服务器返回数据有误',\r\n    //     type: 'warning',\r\n    //     duration: 2 * 1000\r\n    //   });\r\n    // }   \r\n    return res\r\n  }\r\n}, (err: any) => {\r\n  Message({\r\n    message: err,\r\n    type: 'error',\r\n    duration: 3 * 1000\r\n  });\r\n  return { code: 100 }\r\n})\r\n\r\nexport default service;"],"sourceRoot":""}]}