{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\node_modules\\ts-loader\\index.js??ref--13-2!C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\src\\util\\request.ts","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\src\\util\\request.ts","mtime":1610516169505},{"path":"C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAqIGFzIGF4aW9zIGZyb20gJ2F4aW9zJzsgLy8g6L+Z6YeM5Y+v5qC55o2u5YW35L2T5L2/55So55qEdWnnu4Tku7blupPov5vooYzmm7/mjaIKCmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsgLy8gYmFzZVVSTOagueaNruWunumZhei/m+ihjOWumuS5iQovLyBjb25zdCBiYXNlVVJMID0gJ2h0dHA6Ly9idDEud2xxcWxwLmNvbTo4MDgyLyc7Cgp2YXIgYmFzZVVSTCA9ICdodHRwczovL2xvY2FsaG9zdDo0NDM0OC8nOyAvLyDliJvlu7pheGlvc+WunuS+iwoKdmFyIHNlcnZpY2UgPSBheGlvc1siZGVmYXVsdCJdLmNyZWF0ZSh7CiAgYmFzZVVSTDogYmFzZVVSTCwKICB0aW1lb3V0OiAxMDAwMCwKICBtYXhDb250ZW50TGVuZ3RoOiA0MDAwCn0pOwpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgLy8gaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpKSB7CiAgLy8gICBjb25maWcuaGVhZGVycy50b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOyAgLy/orqnor7fmsYLlpLTmkLrluKbpqozor4F0b2tlbgogIC8vICAgLy8gY29uZmlnLmhlYWRlcnMuYWRtaW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpOyAvLyDorqnmr4/kuKror7fmsYLmkLrluKboh6rlrprkuYl0b2tlbiDor7fmoLnmja7lrp7pmYXmg4XlhrXoh6rooYzkv67mlLkKICAvLyB9CiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycikgewogIE1lc3NhZ2UoewogICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UsCiAgICB0eXBlOiAnZXJyb3InLAogICAgZHVyYXRpb246IDMgKiAxMDAwCiAgfSk7CiAgUHJvbWlzZS5yZWplY3QoZXJyKTsKfSk7CnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZSkKICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHsKICAgIE1lc3NhZ2UoewogICAgICBtZXNzYWdlOiAiXHU4QkY3XHU2QzQyXHU5NTE5XHU4QkVGXHVGRjBDIi5jb25jYXQoU3RyaW5nKHJlc3BvbnNlLnN0YXR1cykpLAogICAgICB0eXBlOiAnZXJyb3InLAogICAgICBkdXJhdGlvbjogMyAqIDEwMDAKICAgIH0pOwogICAgcmV0dXJuIHsKICAgICAgY29kZTogMTAwCiAgICB9OwogIH0gZWxzZSB7CiAgICB2YXIgcmVzID0gcmVzcG9uc2UuZGF0YTsgLy8gaWYgKHJlc3BvbnNlLmRhdGEudG9rZW4pIHsKICAgIC8vICAgLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgcmVzcG9uc2UuZGF0YS50b2tlbikKICAgIC8vIH0KICAgIC8vIC8vIGlmIChjb2RlID09PSAtMSkgewogICAgLy8gICBNZXNzYWdlQm94LmFsZXJ0KG1zZywgewogICAgLy8gICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn6YeN5paw55m75b2VJywKICAgIC8vICAgICB0eXBlOiAnd2FybmluZycKICAgIC8vICAgfSkudGhlbigoKSA9PiB7CiAgICAvLyAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgIC8vICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VyJyk7CiAgICAvLyAgICAgICBsb2NhdGlvbi5yZWxvYWQoKSAvLyDkuLrkuobph43mlrDlrp7kvovljJZ2dWUtcm91dGVy5a+56LGhIOmBv+WFjWJ1ZwogICAgLy8gICB9KQogICAgLy8gICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ2Vycm9yJykKICAgIC8vIH0gZWxzZSBpZiAoY29kZSAhPT0gMCkgewogICAgLy8gICBNZXNzYWdlKHsKICAgIC8vICAgICBtZXNzYWdlOiBtc2cgfHwgJ+acjeWKoeWZqOi/lOWbnuaVsOaNruacieivrycsCiAgICAvLyAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgLy8gICAgIGR1cmF0aW9uOiAyICogMTAwMAogICAgLy8gICB9KTsKICAgIC8vIH0gICAKCiAgICByZXR1cm4gcmVzOwogIH0KfSwgZnVuY3Rpb24gKGVycikgewogIE1lc3NhZ2UoewogICAgbWVzc2FnZTogZXJyLAogICAgdHlwZTogJ2Vycm9yJywKICAgIGR1cmF0aW9uOiAzICogMTAwMAogIH0pOwogIHJldHVybiB7CiAgICBjb2RlOiAxMDAKICB9Owp9KTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"sources":["C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\src\\util\\request.ts"],"names":[],"mappings":";AAAA,OAAO,KAAK,KAAZ,MAAuB,OAAvB,C,CAEA;;AACA,SAAS,OAAT,QAAoC,YAApC,C,CAWA;AACA;;AACA,IAAM,OAAO,GAAG,0BAAhB,C,CAEA;;AACA,IAAM,OAAO,GAAG,KAAK,WAAL,CAAc,MAAd,CAAqB;AACnC,EAAA,OAAO,EAAP,OADmC;AAEnC,EAAA,OAAO,EAAE,KAF0B;AAGnC,EAAA,gBAAgB,EAAE;AAHiB,CAArB,CAAhB;AAMA,OAAO,CAAC,YAAR,CAAqB,OAArB,CAA6B,GAA7B,CAAiC,UAAC,MAAD,EAA+B;AAE9D;AAEA;AACA;AAGA;AACA,SAAO,MAAP;AACD,CAVD,EAUG,UAAC,GAAD,EAAa;AACd,EAAA,OAAO,CAAC;AACN,IAAA,OAAO,EAAE,GAAG,CAAC,OADP;AAEN,IAAA,IAAI,EAAE,OAFA;AAGN,IAAA,QAAQ,EAAE,IAAI;AAHR,GAAD,CAAP;AAKA,EAAA,OAAO,CAAC,MAAR,CAAe,GAAf;AACD,CAjBD;AAmBA,OAAO,CAAC,YAAR,CAAqB,QAArB,CAA8B,GAA9B,CAAkC,UAAC,QAAD,EAA4B;AAC5D;AACA,MAAI,QAAQ,CAAC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,IAAA,OAAO,CAAC;AACN,MAAA,OAAO,0CAAU,MAAM,CAAC,QAAQ,CAAC,MAAV,CAAhB,CADD;AAEN,MAAA,IAAI,EAAE,OAFA;AAGN,MAAA,QAAQ,EAAE,IAAI;AAHR,KAAD,CAAP;AAKA,WAAO;AAAE,MAAA,IAAI,EAAE;AAAR,KAAP;AACD,GAPD,MAOM;AACJ,QAAI,GAAG,GAAG,QAAQ,CAAC,IAAnB,CADI,CAEJ;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,WAAO,GAAP;AACD;AACF,CAlCD,EAkCG,UAAC,GAAD,EAAa;AACd,EAAA,OAAO,CAAC;AACN,IAAA,OAAO,EAAE,GADH;AAEN,IAAA,IAAI,EAAE,OAFA;AAGN,IAAA,QAAQ,EAAE,IAAI;AAHR,GAAD,CAAP;AAKA,SAAO;AAAE,IAAA,IAAI,EAAE;AAAR,GAAP;AACD,CAzCD;AA2CA,eAAe,OAAf","sourcesContent":["import * as axios from 'axios';\r\n\r\n// 这里可根据具体使用的ui组件库进行替换\r\nimport { Message, MessageBox } from 'element-ui';\r\nimport { AxiosResponse, AxiosRequestConfig } from 'axios';\r\n\r\nexport interface AjaxResponse {\r\n  code: number;\r\n  message: string;\r\n  data: any,\r\n  page:number,\r\n  limit:number\r\n}\r\n\r\n// baseURL根据实际进行定义\r\n// const baseURL = 'http://bt1.wlqqlp.com:8082/';\r\nconst baseURL = 'https://localhost:44348/';\r\n\r\n// 创建axios实例\r\nconst service = axios.default.create({\r\n  baseURL,\r\n  timeout: 10000,  // 请求超时时间\r\n  maxContentLength: 4000\r\n})\r\n\r\nservice.interceptors.request.use((config: AxiosRequestConfig) => {\r\n  \r\n  // if (localStorage.getItem('token')) {\r\n  \r\n  //   config.headers.token = localStorage.getItem('token');  //让请求头携带验证token\r\n  //   // config.headers.admin = localStorage.getItem('user'); // 让每个请求携带自定义token 请根据实际情况自行修改\r\n  \r\n\r\n  // }\r\n  return config\r\n}, (err: any) => {\r\n  Message({\r\n    message: err.message,\r\n    type: 'error',\r\n    duration: 3 * 1000\r\n  });\r\n  Promise.reject(err)\r\n});\r\n\r\nservice.interceptors.response.use((response: AxiosResponse) => {\r\n  // console.log(response)\r\n  if (response.status !== 200) {\r\n    Message({\r\n      message: `请求错误，${String(response.status)}`,\r\n      type: 'error',\r\n      duration: 3 * 1000\r\n    });\r\n    return { code: 100 }\r\n  } else{\r\n    let res = response.data;\r\n    // if (response.data.token) {\r\n      \r\n    //   // localStorage.setItem('token', response.data.token)\r\n    // }\r\n    // // if (code === -1) {\r\n    //   MessageBox.alert(msg, {\r\n    //     confirmButtonText: '重新登录',\r\n    //     type: 'warning'\r\n    //   }).then(() => {\r\n    //       localStorage.removeItem('token');\r\n    //       localStorage.removeItem('user');\r\n    //       location.reload() // 为了重新实例化vue-router对象 避免bug\r\n    //   })\r\n    //   return Promise.reject('error')\r\n    // } else if (code !== 0) {\r\n    //   Message({\r\n    //     message: msg || '服务器返回数据有误',\r\n    //     type: 'warning',\r\n    //     duration: 2 * 1000\r\n    //   });\r\n    // }   \r\n    return res\r\n  }\r\n}, (err: any) => {\r\n  Message({\r\n    message: err,\r\n    type: 'error',\r\n    duration: 3 * 1000\r\n  });\r\n  return { code: 100 }\r\n})\r\n\r\nexport default service;"],"sourceRoot":""}]}