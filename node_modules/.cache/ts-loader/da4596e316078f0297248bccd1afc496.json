{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\ts-loader\\index.js??ref--13-3!C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\src\\service\\index.ts","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\src\\service\\index.ts","mtime":1610955952321},{"path":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKLy8g5q2j5byP546v5aKD6LCD55Soc2VydmljZe+8iOWunumZheW8gOWPkeivt+afpeeci+ivpemDqOWIhuS7o+egge+8iQppbXBvcnQgc2VydmljZSBmcm9tICIuLi91dGlsL3JlcXVlc3QiOwoKdmFyIHFzID0gcmVxdWlyZSgncXMnKTsKCnZhciBiYXNlVXJsID0gJy8nOwpleHBvcnQgZGVmYXVsdCB7CiAgLy8g55m75b2VCiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKHBhcmFtcykgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBsb2dpbiQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9sb2dpbi9sb2dpbiIpLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dC5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDmib7lm57lr4bnoIEKICBGcGFzc3dvcmQ6IGZ1bmN0aW9uIEZwYXNzd29yZChwYXJhbXMpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gRnBhc3N3b3JkJChfY29udGV4dDIpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9sb2dpbi96aGFvcGFzc3dvcmQiKSwgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0Mi5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5Y+R6YCB5omL5py66aqM6K+BCiAgUENvZGU6IGZ1bmN0aW9uIFBDb2RlKHBhcmFtcykgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBQQ29kZSQoX2NvbnRleHQzKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLnBvc3QoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvbG9naW4vaHNzbXNwaG9uZSIpLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQzLnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDlt6XkvZzlj7AKICBkYXNoYm9hcmQ6IGZ1bmN0aW9uIGRhc2hib2FyZCgpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZGFzaGJvYXJkJChfY29udGV4dDQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UuZ2V0KCIiLmNvbmNhdChiYXNlVXJsLCAiYXBpL2hvbWUvTHpfd29ya2JlbmNoIikpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ0LnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDmipXor4nliJfooagKICBDb21MaXN0OiBmdW5jdGlvbiBDb21MaXN0KHBOdW0sIGN1cnJlbnQpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gQ29tTGlzdCQoX2NvbnRleHQ1KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLmdldCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS90c2V2ZW50L2xpc3RzIiksIHsKICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgIHBOdW06IHBOdW0sCiAgICAgICAgICAgICAgICBjdXJyZW50OiBjdXJyZW50CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0NS5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy/mkJzntKIKICBzZWFyY2g6IGZ1bmN0aW9uIHNlYXJjaChwTnVtLCBjdXJyZW50LCBjb21wbGFpbnRfbmFtZSwgQ29tcGxhaW50VHlwZSwgc3RhdGUsIHN0YXJ0X3RpbWUsIGVuZF90aW1lKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHNlYXJjaCQoX2NvbnRleHQ2KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLmdldCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS90c2V2ZW50L2xpc3RzIiksIHsKICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgIHBOdW06IHBOdW0sCiAgICAgICAgICAgICAgICBjdXJyZW50OiBjdXJyZW50LAogICAgICAgICAgICAgICAgY29tcGxhaW50X25hbWU6IGNvbXBsYWludF9uYW1lLAogICAgICAgICAgICAgICAgQ29tcGxhaW50VHlwZTogQ29tcGxhaW50VHlwZSwKICAgICAgICAgICAgICAgIHN0YXRlOiBzdGF0ZSwKICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWU6IHN0YXJ0X3RpbWUsCiAgICAgICAgICAgICAgICBlbmRfdGltZTogZW5kX3RpbWUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ2LnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDojrflj5bmt7vliqDmipXor4nliJfooajkv6Hmga8KICBBZGRDb206IGZ1bmN0aW9uIEFkZENvbSgpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gQWRkQ29tJChfY29udGV4dDcpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UuZ2V0KCIiLmNvbmNhdChiYXNlVXJsLCAiYXBpL3RzZXZlbnQvYWRkIikpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ3LnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDmt7vliqDmipXor4kKICBBZGRDb21wb25lbnQ6IGZ1bmN0aW9uIEFkZENvbXBvbmVudChwYXJhbXMpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gQWRkQ29tcG9uZW50JChfY29udGV4dDgpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS90c2V2ZW50L2FkZCIpLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ4LnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDojrflj5bor6bmg4UKICBjb21wb25yZGV0YWlsZTogZnVuY3Rpb24gY29tcG9ucmRldGFpbGUoZGF0YSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBjb21wb25yZGV0YWlsZSQoX2NvbnRleHQ5KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLnBvc3QoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvdHNldmVudC9kZXRhaWxzIiksIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ5LnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDlvoXkuIvlj5EKICBJc3N1ZTogZnVuY3Rpb24gSXNzdWUoZXZlbnRfbnVtYmVyKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIElzc3VlJChfY29udGV4dDEwKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDEwLnByZXYgPSBfY29udGV4dDEwLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLmdldCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS90c2V2ZW50L2lzc3VlIiksIHsKICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgIGV2ZW50X251bWJlcjogZXZlbnRfbnVtYmVyCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDEwLnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5oqV6K+J6YCA5ZueCiAgc2VuZDogZnVuY3Rpb24gc2VuZChldmVudF9udW1iZXIsIGV4YW1pbmVfdGV4dG9uZSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBzZW5kJChfY29udGV4dDExKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDExLnByZXYgPSBfY29udGV4dDExLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLmdldCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9jb21wbGFpbnRwcm9jZXNzL2NvbXBsYWludFJldHVybiIpLCB7CiAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICBldmVudF9udW1iZXI6IGV2ZW50X251bWJlciwKICAgICAgICAgICAgICAgIGV4YW1pbmVfdGV4dG9uZTogZXhhbWluZV90ZXh0b25lCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDExLnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5oqV6K+J6amz5ZueCiAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3QoZXZlbnRfbnVtYmVyLCBleGFtaW5lX3RleHRvbmUpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gcmVqZWN0JChfY29udGV4dDEyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLmdldCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9jb21wbGFpbnRwcm9jZXNzL2NvbXBsYWludFJldHVybiIpLCB7CiAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICBldmVudF9udW1iZXI6IGV2ZW50X251bWJlciwKICAgICAgICAgICAgICAgIGV4YW1pbmVfdGV4dG9uZTogZXhhbWluZV90ZXh0b25lCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDEyLnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5LiL5Y+R56eR5a6k6LCD5p+lCiAgSXNzdWVkZXBhcnRtZW50OiBmdW5jdGlvbiBJc3N1ZWRlcGFydG1lbnQoZGF0YSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBJc3N1ZWRlcGFydG1lbnQkKF9jb250ZXh0MTMpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTMucHJldiA9IF9jb250ZXh0MTMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9Db21wbGFpbnRwcm9jZXNzL2Rpc3RyaWJ1dGlvbkRlcGFydG1lbnQiKSwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQxMy5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vICAg56eR5a6k5o+Q5LqkCiAgZGVwYXJ0bWVudHN1Ym1pdDogZnVuY3Rpb24gZGVwYXJ0bWVudHN1Ym1pdChkYXRhKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGRlcGFydG1lbnRzdWJtaXQkKF9jb250ZXh0MTQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTQucHJldiA9IF9jb250ZXh0MTQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDE0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9Db21wbGFpbnRwcm9jZXNzL2RlcGFydG1lbnRTdXJ2ZXlTdWJtaXNzaW9uIiksIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0MTQuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyAgIOmZouWGheiuqOiuugogIGRpc2N1c3Npb246IGZ1bmN0aW9uIGRpc2N1c3Npb24oZGF0YSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBkaXNjdXNzaW9uJChfY29udGV4dDE1KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDE1LnByZXYgPSBfY29udGV4dDE1Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLnBvc3QoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvQ29tcGxhaW50cHJvY2Vzcy9ob3NwaXRhbERpc2N1c3Npb24iKSwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQxNS5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vICAg5Yy75oKj5rKf6YCaCiAgY29tbXVuaWNhdGU6IGZ1bmN0aW9uIGNvbW11bmljYXRlKGRhdGEpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gY29tbXVuaWNhdGUkKF9jb250ZXh0MTYpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTYucHJldiA9IF9jb250ZXh0MTYubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDE2Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9Db21wbGFpbnRwcm9jZXNzL2RvY3RvclBhdGllbnRDb21tdW5pY2F0aW9uIiksIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNi5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0MTYuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTYuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvL+S6uuawkeiwg+inowogIG1lZGlhdGU6IGZ1bmN0aW9uIG1lZGlhdGUoZGF0YSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBtZWRpYXRlJChfY29udGV4dDE3KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDE3LnByZXYgPSBfY29udGV4dDE3Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQxNy5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLnBvc3QoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvQ29tcGxhaW50cHJvY2Vzcy9wZW9wbGVzTWVkaWF0aW9uIiksIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNy5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0MTcuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTcuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDotKPku7vpibTlrpoKICBhcHByYWlzYWw6IGZ1bmN0aW9uIGFwcHJhaXNhbChkYXRhKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGFwcHJhaXNhbCQoX2NvbnRleHQxOCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQxOC5wcmV2ID0gX2NvbnRleHQxOC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VydmljZS5wb3N0KCIiLmNvbmNhdChiYXNlVXJsLCAiYXBpL0NvbXBsYWludHByb2Nlc3MvcmVzcG9uc2liaWxpdHlBcHByYWlzYWwiKSwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE4LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQxOC5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8v5oKj5pa55o6o6L+fCiAgZGVsYXk6IGZ1bmN0aW9uIGRlbGF5KGRhdGEpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZGVsYXkkKF9jb250ZXh0MTkpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTkucHJldiA9IF9jb250ZXh0MTkubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDE5Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9Db21wbGFpbnRwcm9jZXNzL1BhdGllbnRzRGVsYXkiKSwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQxOS5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vICAg5Lit5q2i6LCD6KejIAogIHN1c3BlbnNpb246IGZ1bmN0aW9uIHN1c3BlbnNpb24oZGF0YSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBzdXNwZW5zaW9uJChfY29udGV4dDIwKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIwLnByZXYgPSBfY29udGV4dDIwLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQyMC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLnBvc3QoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvQ29tcGxhaW50cHJvY2Vzcy9zdXNwZW5zaW9uT2ZSZWd1bGF0aW9uIiksIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0MjAuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjAuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyAgIOe7iOatouiwg+inowogIHRlcm1pbmF0aW9uOiBmdW5jdGlvbiB0ZXJtaW5hdGlvbihkYXRhKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHRlcm1pbmF0aW9uJChfY29udGV4dDIxKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIxLnByZXYgPSBfY29udGV4dDIxLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQyMS5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLnBvc3QoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvQ29tcGxhaW50cHJvY2Vzcy90ZXJtaW5hdGlvbk9mUmVndWxhdGlvbiIpLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjEuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDIxLnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIxLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5Y+45rOV6K+J6K68ICAKICBsaXRpZ2F0aW9uOiBmdW5jdGlvbiBsaXRpZ2F0aW9uKGRhdGEpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gbGl0aWdhdGlvbiQoX2NvbnRleHQyMikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyMi5wcmV2ID0gX2NvbnRleHQyMi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0MjIubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VydmljZS5wb3N0KCIiLmNvbmNhdChiYXNlVXJsLCAiYXBpL0NvbXBsYWludHByb2Nlc3MvanVkaWNpYWxMaXRpZ2F0aW9uIiksIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMi5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0MjIuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyAgIOS4i+WPkeaUuei/m+enkeWupAogIEltcHJvdmVEZXBhcnRtZW50OiBmdW5jdGlvbiBJbXByb3ZlRGVwYXJ0bWVudChkYXRhKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIEltcHJvdmVEZXBhcnRtZW50JChfY29udGV4dDIzKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIzLnByZXYgPSBfY29udGV4dDIzLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQyMy5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLnBvc3QoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvQ29tcGxhaW50cHJvY2Vzcy9kZXBhcnRtZW50SW1wcm92ZW1lbnQiKSwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIzLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQyMy5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMy5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vICAg56eR5a6k5pS56L+b5a6M5oiQCiAgSW1wcm92ZURlcGFydG1lbnRzdWJtaXNzaW9uOiBmdW5jdGlvbiBJbXByb3ZlRGVwYXJ0bWVudHN1Ym1pc3Npb24oZGF0YSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBJbXByb3ZlRGVwYXJ0bWVudHN1Ym1pc3Npb24kKF9jb250ZXh0MjQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjQucHJldiA9IF9jb250ZXh0MjQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDI0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9Db21wbGFpbnRwcm9jZXNzL2RlcGFydG1lbnRJbXByb3ZlbWVudFN1Ym1pc3Npb24iKSwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQyNC5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vICAg5Yy76Zmi5pS56L+bCiAgSG9zcGl0YWxpbXByb3ZlbWVudDogZnVuY3Rpb24gSG9zcGl0YWxpbXByb3ZlbWVudChkYXRhKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIEhvc3BpdGFsaW1wcm92ZW1lbnQkKF9jb250ZXh0MjUpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjUucHJldiA9IF9jb250ZXh0MjUubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDI1Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9Db21wbGFpbnRwcm9jZXNzL2hvc3BpdGFsSW1wcm92ZW1lbnQiKSwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI1LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQyNS5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vICAg5Yy76Zmi5pS56L+b5a6M5oiQCiAgSW1wcm92ZW1lbnRFbmQ6IGZ1bmN0aW9uIEltcHJvdmVtZW50RW5kKGRhdGEpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gSW1wcm92ZW1lbnRFbmQkKF9jb250ZXh0MjYpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjYucHJldiA9IF9jb250ZXh0MjYubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDI2Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9Db21wbGFpbnRwcm9jZXNzL2hvc3BpdGFsSW1wcm92ZW1lbnRFbmQiKSwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI2LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQyNi5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vICAg57uT5p2fCiAgZW5kOiBmdW5jdGlvbiBlbmQoZGF0YSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBlbmQkKF9jb250ZXh0MjcpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjcucHJldiA9IF9jb250ZXh0MjcubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDI3Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9Db21wbGFpbnRwcm9jZXNzL2V2ZW50RW5kIiksIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNy5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0Mjcuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mjcuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyAgIOS4iuS8oOmZhOS7tgogIHVwbG9hZGZpbGVzOiBmdW5jdGlvbiB1cGxvYWRmaWxlcyhkYXRhKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHVwbG9hZGZpbGVzJChfY29udGV4dDI4KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDI4LnByZXYgPSBfY29udGV4dDI4Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLnBvc3QoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvQ29tcGxhaW50cHJvY2Vzcy9ldmVudF91cGxvYWRmaWxlcyIpLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjguYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDI4LnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI4LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5LiN6Imv5LqL5Lu25YiX6KGoCiAgQWRlTGlzdDogZnVuY3Rpb24gQWRlTGlzdChwYXJhbXMpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gQWRlTGlzdCQoX2NvbnRleHQyOSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyOS5wcmV2ID0gX2NvbnRleHQyOS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0MjkubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VydmljZS5nZXQoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvYmFkL2xpc3RzIiksIHsKICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjkuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDI5LnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI5LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5LiN6Imv5qOA57SiCiAgQWRlU2VhcmNoOiBmdW5jdGlvbiBBZGVTZWFyY2gocGFyYW1zKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIEFkZVNlYXJjaCQoX2NvbnRleHQzMCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzMC5wcmV2ID0gX2NvbnRleHQzMC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0MzAubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VydmljZS5nZXQoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvYmFkL2xpc3RzIiksIHsKICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzAuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDMwLnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMwLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5LqL5Lu257yW5Y+3CiAgYmFkTnVtOiBmdW5jdGlvbiBiYWROdW0oKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGJhZE51bSQoX2NvbnRleHQzMSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzMS5wcmV2ID0gX2NvbnRleHQzMS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0MzEubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VydmljZS5nZXQoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvYmFkL2JhZF9hZGQiKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMxLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQzMS5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzMS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vIOehruiupOS4jeiJr+aWsOWingogIGJhZEFkZDogZnVuY3Rpb24gYmFkQWRkKHBhcmFtcykgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBiYWRBZGQkKF9jb250ZXh0MzIpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MzIucHJldiA9IF9jb250ZXh0MzIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDMyLm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9iYWQvYmFkX2FkZCIpLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzMi5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0MzIuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDkuI3oia/kuK3nmoTkuIvmi4nmoYYKICBBZGVTZWw6IGZ1bmN0aW9uIEFkZVNlbCgpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gQWRlU2VsJChfY29udGV4dDMzKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDMzLnByZXYgPSBfY29udGV4dDMzLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQzMy5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLmdldCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9iYWQvYmFkX2FkZCIpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzMuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDMzLnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMzLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5LiN6Imv5p+l55yLCiAgYmFkU2VlOiBmdW5jdGlvbiBiYWRTZWUocGFyYW1zKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGJhZFNlZSQoX2NvbnRleHQzNCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzNC5wcmV2ID0gX2NvbnRleHQzNC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0MzQubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VydmljZS5nZXQoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvYmFkL2JhZF9pbmZvIiksIHsKICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDM0LnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDM0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5ZGY5bel566h55CGCiAgLy8g5ZGY5bel5YiX6KGo5pi+56S6CiAgc3RhZmZMaXN0OiBmdW5jdGlvbiBzdGFmZkxpc3QocGFyYW1zKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHN0YWZmTGlzdCQoX2NvbnRleHQzNSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzNS5wcmV2ID0gX2NvbnRleHQzNS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0MzUubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VydmljZS5nZXQoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvRW1wbG95ZWVzL2luZGV4IiksIHsKICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzUuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDM1LnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDM1LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgc3RhZmZsaXN0OiBmdW5jdGlvbiBzdGFmZmxpc3QoZGF0YSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBzdGFmZmxpc3QkKF9jb250ZXh0MzYpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MzYucHJldiA9IF9jb250ZXh0MzYubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDM2Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9FbXBsb3llZXMvaW5kZXgiKSwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDM2LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQzNi5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vIC8vIOWRmOW3peaQnOe0ogogIC8vIHN0YWZmU2VhOiBhc3luYyAocGFyYW1zOiBPYmplY3QpID0+IHsKICAvLyAgIHJldHVybiBhd2FpdCBzZXJ2aWNlLnBvc3QoYCR7YmFzZVVybH1hcGkvRW1wbG95ZWVzL25hbWVzZWFyY2hgLCBwYXJhbXMpLnRoZW4ocmVzID0+IHJlcykuY2F0Y2goZXJyID0+IGVycikKICAvLyB9LAogIC8vIOWRmOW3pea3u+WKoAogIHN0YWZmQWRkOiBmdW5jdGlvbiBzdGFmZkFkZChkYXRhKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHN0YWZmQWRkJChfY29udGV4dDM3KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDM3LnByZXYgPSBfY29udGV4dDM3Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQzNy5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLnBvc3QoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvRW1wbG95ZWVzL2FkZCIpLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzcuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDM3LnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDM3LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5ZGY5bel57yW6L6RCiAgc3RhZmZFZGl0OiBmdW5jdGlvbiBzdGFmZkVkaXQocGFyYW1zKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHN0YWZmRWRpdCQoX2NvbnRleHQzOCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzOC5wcmV2ID0gX2NvbnRleHQzOC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0MzgubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VydmljZS5wb3N0KCIiLmNvbmNhdChiYXNlVXJsLCAiYXBpL0VtcGxveWVlcy9lZGl0IiksIHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDM4LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQzOC5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzOC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vIOWRmOW3peWIoOmZpAogIHN0YWZmRGVsOiBmdW5jdGlvbiBzdGFmZkRlbChwYXJhbXMpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gc3RhZmZEZWwkKF9jb250ZXh0MzkpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MzkucHJldiA9IF9jb250ZXh0MzkubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDM5Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9FbXBsb3llZXMvZGVsIiksIHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDM5LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQzOS5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzOS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vIOWRmOW3peeKtuaAgQogIHN0YWZmU3RhdGU6IGZ1bmN0aW9uIHN0YWZmU3RhdGUocGFyYW1zKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHN0YWZmU3RhdGUkKF9jb250ZXh0NDApIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NDAucHJldiA9IF9jb250ZXh0NDAubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDQwLm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9FbXBsb3llZXMvc3RhdHVzIiksIHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQwLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ0MC5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0MC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vCiAgZ2V0cm9sZTogZnVuY3Rpb24gZ2V0cm9sZShwYXJhbXMpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0cm9sZSQoX2NvbnRleHQ0MSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0MS5wcmV2ID0gX2NvbnRleHQ0MS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0NDEubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VydmljZS5nZXQoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvRW1wbG95ZWVzL2FkZCIpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NDEuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDQxLnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQxLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8KICBzdGFmZmVkaXRzOiBmdW5jdGlvbiBzdGFmZmVkaXRzKHBhcmFtcykgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBzdGFmZmVkaXRzJChfY29udGV4dDQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDQyLnByZXYgPSBfY29udGV4dDQyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLmdldCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9FbXBsb3llZXMvZWRpdCIpLCB7CiAgICAgICAgICAgICAgcGFyYW1zOiBwYXJhbXMKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQyLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ0Mi5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vIOinkuiJsuWIl+ihqAogIHJvbGVsaXN0OiBmdW5jdGlvbiByb2xlbGlzdCgpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gcm9sZWxpc3QkKF9jb250ZXh0NDMpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NDMucHJldiA9IF9jb250ZXh0NDMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDQzLm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UuZ2V0KCIiLmNvbmNhdChiYXNlVXJsLCAiYXBpL3BhcnQvYXV0aGdyb3VwIikpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0My5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0NDMuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NDMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvL+inkuiJsuaQnOe0ogogIHJvbGVzZXJjaDogZnVuY3Rpb24gcm9sZXNlcmNoKGRhdGEpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gcm9sZXNlcmNoJChfY29udGV4dDQ0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDQ0LnByZXYgPSBfY29udGV4dDQ0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ0NC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLnBvc3QoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvcGFydC9hdXRoZ3JvdXAiKSwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQ0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ0NC5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0NC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vIOinkuiJsue8lui+kQogIHJvbGVlZGl0OiBmdW5jdGlvbiByb2xlZWRpdChwYXJhbXMpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gcm9sZWVkaXQkKF9jb250ZXh0NDUpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NDUucHJldiA9IF9jb250ZXh0NDUubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDQ1Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UuZ2V0KCIiLmNvbmNhdChiYXNlVXJsLCAiYXBpL3BhcnQvZWRpdGF1dGhncm91cCIpLCB7CiAgICAgICAgICAgICAgcGFyYW1zOiBwYXJhbXMKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQ1LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ0NS5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0NS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vIOinkuiJsue8lui+kXNhdmUKICByb2xlZWRpdHNxdmU6IGZ1bmN0aW9uIHJvbGVlZGl0c3F2ZShkYXRhKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHJvbGVlZGl0c3F2ZSQoX2NvbnRleHQ0NikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0Ni5wcmV2ID0gX2NvbnRleHQ0Ni5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0NDYubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VydmljZS5wb3N0KCIiLmNvbmNhdChiYXNlVXJsLCAiYXBpL3BhcnQvZWRpdGF1dGhncm91cCIpLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NDYuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDQ2LnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQ2LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g6KeS6Imy5re75YqgCiAgcm9sZWFkZDogZnVuY3Rpb24gcm9sZWFkZChkYXRhKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHJvbGVhZGQkKF9jb250ZXh0NDcpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NDcucHJldiA9IF9jb250ZXh0NDcubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDQ3Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9wYXJ0L2FkZGF1dGhncm91cCIpLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NDcuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDQ3LnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQ3LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g6KeS6Imy5re75YqgCiAgcm9sZWRlbDogZnVuY3Rpb24gcm9sZWRlbChkYXRhKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHJvbGVkZWwkKF9jb250ZXh0NDgpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NDgucHJldiA9IF9jb250ZXh0NDgubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDQ4Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9wYXJ0L2RlbGF1dGhncm91cCIpLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NDguYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDQ4LnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQ4LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g6KeS6Imy54q25oCBCiAgcm9sZXN0YXR1czogZnVuY3Rpb24gcm9sZXN0YXR1cyhkYXRhKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHJvbGVzdGF0dXMkKF9jb250ZXh0NDkpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NDkucHJldiA9IF9jb250ZXh0NDkubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDQ5Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9wYXJ0L2VkaXRzdGF0dXMiKSwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQ5LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ0OS5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0OS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vIOenkeWupOWIl+ihqAogIGRlcGFydGxpc3Q6IGZ1bmN0aW9uIGRlcGFydGxpc3QoKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGRlcGFydGxpc3QkKF9jb250ZXh0NTApIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NTAucHJldiA9IF9jb250ZXh0NTAubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDUwLm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UuZ2V0KCIiLmNvbmNhdChiYXNlVXJsLCAiYXBpL0RlcGFydG1lbnQvbGlzdHMiKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUwLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ1MC5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1MC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vIOenkeWupOaQnOe0ogogIGRlcGFydHNlcmM6IGZ1bmN0aW9uIGRlcGFydHNlcmMocGFyYW1zKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGRlcGFydHNlcmMkKF9jb250ZXh0NTEpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NTEucHJldiA9IF9jb250ZXh0NTEubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDUxLm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UuZ2V0KCIiLmNvbmNhdChiYXNlVXJsLCAiYXBpL0RlcGFydG1lbnQvbGlzdHMiKSwgewogICAgICAgICAgICAgIHBhcmFtczogcGFyYW1zCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1MS5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0NTEuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NTEuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDmlrDlop4KICBkZXBhcnRhZGQ6IGZ1bmN0aW9uIGRlcGFydGFkZCgpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZGVwYXJ0YWRkJChfY29udGV4dDUyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDUyLnByZXYgPSBfY29udGV4dDUyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ1Mi5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLmdldCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9EZXBhcnRtZW50L2FkZCIpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NTIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDUyLnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5paw5aKe5L+d5a2YCiAgZGVwYXJ0c2F2ZTogZnVuY3Rpb24gZGVwYXJ0c2F2ZShkYXRhKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGRlcGFydHNhdmUkKF9jb250ZXh0NTMpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NTMucHJldiA9IF9jb250ZXh0NTMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDUzLm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9EZXBhcnRtZW50L2FkZCIpLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NTMuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDUzLnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUzLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g57yW6L6R5LygaWQKICBkZXBhcnRlZGl0OiBmdW5jdGlvbiBkZXBhcnRlZGl0KHBhcmFtcykgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBkZXBhcnRlZGl0JChfY29udGV4dDU0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDU0LnByZXYgPSBfY29udGV4dDU0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ1NC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLmdldCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9EZXBhcnRtZW50L2VkaXQiKSwgewogICAgICAgICAgICAgIHBhcmFtczogcGFyYW1zCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1NC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0NTQuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NTQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDnvJbovpFzYXZlCiAgZGVwYXJ0ZWRpdHNhdmU6IGZ1bmN0aW9uIGRlcGFydGVkaXRzYXZlKGRhdGEpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZGVwYXJ0ZWRpdHNhdmUkKF9jb250ZXh0NTUpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NTUucHJldiA9IF9jb250ZXh0NTUubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDU1Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9EZXBhcnRtZW50L2VkaXQiKSwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDU1LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ1NS5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1NS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vIOWIoOmZpAogIGRlcGFydGRlbDogZnVuY3Rpb24gZGVwYXJ0ZGVsKHBhcmFtcykgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBkZXBhcnRkZWwkKF9jb250ZXh0NTYpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NTYucHJldiA9IF9jb250ZXh0NTYubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDU2Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UuZ2V0KCIiLmNvbmNhdChiYXNlVXJsLCAiYXBpL0RlcGFydG1lbnQvZGVsIiksIHsKICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NTYuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDU2LnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDU2LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5pu05pS554q25oCBCiAgZGVwYXJ0c3RhdHVzOiBmdW5jdGlvbiBkZXBhcnRzdGF0dXMoZGF0YSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBkZXBhcnRzdGF0dXMkKF9jb250ZXh0NTcpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NTcucHJldiA9IF9jb250ZXh0NTcubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDU3Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9EZXBhcnRtZW50L3N0YXR1cyIpLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NTcuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDU3LnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDU3LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy/mnYPpmZDliJfooagKICBydWxlbGlzdDogZnVuY3Rpb24gcnVsZWxpc3QoKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHJ1bGVsaXN0JChfY29udGV4dDU4KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDU4LnByZXYgPSBfY29udGV4dDU4Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ1OC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLmdldCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9hdXRocy9nZXRfcnVsZXMiKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDU4LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ1OC5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1OC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8v5LiK57qn5p2D6ZmQCiAgYWRkcG93ZXI6IGZ1bmN0aW9uIGFkZHBvd2VyKCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBhZGRwb3dlciQoX2NvbnRleHQ1OSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1OS5wcmV2ID0gX2NvbnRleHQ1OS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0NTkubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VydmljZS5nZXQoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvYXV0aHMvZ2V0X3J1bGVzIikpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1OS5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0NTkuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NTkuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvL+a3u+WKoOadg+mZkAogIHNhdmVwb3dlcjogZnVuY3Rpb24gc2F2ZXBvd2VyKGRhdGEpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gc2F2ZXBvd2VyJChfY29udGV4dDYwKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDYwLnByZXYgPSBfY29udGV4dDYwLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ2MC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLnBvc3QoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvYXV0aHMvcnVsZV9hZGQiKSwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYwLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ2MC5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2MC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8v57yW6L6R5p2D6ZmQ5LygaWQKICBnZXRwb3dpZDogZnVuY3Rpb24gZ2V0cG93aWQocGFyYW1zKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldHBvd2lkJChfY29udGV4dDYxKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDYxLnByZXYgPSBfY29udGV4dDYxLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ2MS5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLmdldCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9hdXRocy9ydWxlX2VpdCIpLCB7CiAgICAgICAgICAgICAgcGFyYW1zOiBwYXJhbXMKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYxLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ2MS5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2MS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8v57yW6L6R5p2D6ZmQc2F2ZQogIGVkaXRzYXZlcG93ZXI6IGZ1bmN0aW9uIGVkaXRzYXZlcG93ZXIoZGF0YSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBlZGl0c2F2ZXBvd2VyJChfY29udGV4dDYyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDYyLnByZXYgPSBfY29udGV4dDYyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ2Mi5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLnBvc3QoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvYXV0aHMvcnVsZV9laXQiKSwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYyLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ2Mi5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8v5Yig6Zmk5p2D6ZmQCiAgZGVscG93OiBmdW5jdGlvbiBkZWxwb3coZGF0YSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBkZWxwb3ckKF9jb250ZXh0NjMpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NjMucHJldiA9IF9jb250ZXh0NjMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDYzLm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9hdXRocy9kZWwiKSwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYzLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ2My5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2My5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8v5Liq5Lq65L+h5oGvCiAgcGVyc29ueHE6IGZ1bmN0aW9uIHBlcnNvbnhxKCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBwZXJzb254cSQoX2NvbnRleHQ2NCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2NC5wcmV2ID0gX2NvbnRleHQ2NC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0NjQubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VydmljZS5nZXQoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvaG9tZS9wZXJzb25hbCIpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NjQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDY0LnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDY0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy/kuKrkurrkv6Hmga/nvJbovpHkv53lrZgKICBjaGFuZ2VpbmZvcjogZnVuY3Rpb24gY2hhbmdlaW5mb3IoZGF0YSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBjaGFuZ2VpbmZvciQoX2NvbnRleHQ2NSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2NS5wcmV2ID0gX2NvbnRleHQ2NS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0NjUubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VydmljZS5wb3N0KCIiLmNvbmNhdChiYXNlVXJsLCAiYXBpL2hvbWUvZWRpdF9wZXJzb25hbCIpLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NjUuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDY1LnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDY1LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy/kuKrkurrmiYvmnLrlj7cKICBwaG9uZXl6OiBmdW5jdGlvbiBwaG9uZXl6KGRhdGEpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gcGhvbmV5eiQoX2NvbnRleHQ2NikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2Ni5wcmV2ID0gX2NvbnRleHQ2Ni5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0NjYubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VydmljZS5wb3N0KCIiLmNvbmNhdChiYXNlVXJsLCAiYXBpL2xvZ2luL2hzc21zcGhvbmUiKSwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDY2LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ2Ni5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2Ni5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8v5omL5py65Y+36aqM6K+BCiAgcGhvbmVjaGFuZ2U6IGZ1bmN0aW9uIHBob25lY2hhbmdlKGRhdGEpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gcGhvbmVjaGFuZ2UkKF9jb250ZXh0NjcpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NjcucHJldiA9IF9jb250ZXh0NjcubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDY3Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9ob21lL2F1dGhlbnRpY2F0aW9uIiksIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2Ny5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0Njcuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Njcuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvL+aJi+acuuWPt+aNoue7kQogIHBob25laGI6IGZ1bmN0aW9uIHBob25laGIoZGF0YSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBwaG9uZWhiJChfY29udGV4dDY4KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDY4LnByZXYgPSBfY29udGV4dDY4Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ2OC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLnBvc3QoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvaG9tZS9oc19iaW5kX3Bob25lIiksIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2OC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0Njguc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Njguc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvL+mCrueusXl6CiAgZW1haWxjb2RlOiBmdW5jdGlvbiBlbWFpbGNvZGUoZGF0YSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBlbWFpbGNvZGUkKF9jb250ZXh0NjkpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NjkucHJldiA9IF9jb250ZXh0NjkubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDY5Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9ob21lL3NmZXJfZW1haWwiKSwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDY5LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ2OS5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2OS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8v6YKu566xaGIKICBlbWFpbGhiOiBmdW5jdGlvbiBlbWFpbGhiKGRhdGEpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZW1haWxoYiQoX2NvbnRleHQ3MCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3MC5wcmV2ID0gX2NvbnRleHQ3MC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0NzAubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VydmljZS5wb3N0KCIiLmNvbmNhdChiYXNlVXJsLCAiYXBpL2hvbWUvYmluZF9lbWFpbCIpLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NzAuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDcwLnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcwLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy/otKbmiLfnrqHnkIYKICBhY2NvdW50bWFuOiBmdW5jdGlvbiBhY2NvdW50bWFuKCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBhY2NvdW50bWFuJChfY29udGV4dDcxKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDcxLnByZXYgPSBfY29udGV4dDcxLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ3MS5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLmdldCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9ob21lL3VzZXJfaG9tZSIpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NzEuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDcxLnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcxLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5paH56ug5YiX6KGoIChwb3N0KQogIGRldGFpbExpc3Q6IGZ1bmN0aW9uIGRldGFpbExpc3QoKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGRldGFpbExpc3QkKF9jb250ZXh0NzIpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NzIucHJldiA9IF9jb250ZXh0NzIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDcyLm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9hcnRpY2xlL2FydGljbGVfY2F0ZSIpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NzIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDcyLnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5paH56ug5YiX6KGo77yIZ2V077yJCiAgZGV0YWlsbGlzdDogZnVuY3Rpb24gZGV0YWlsbGlzdCgpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZGV0YWlsbGlzdCQoX2NvbnRleHQ3MykgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3My5wcmV2ID0gX2NvbnRleHQ3My5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0NzMubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VydmljZS5nZXQoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvYXJ0aWNsZS9hcnRpY2xlX2NhdGUiKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDczLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ3My5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3My5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vIOa3u+WKoOaWh+eroAogIEFyaUxpc3Q6IGZ1bmN0aW9uIEFyaUxpc3QocGFyYW1zKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIEFyaUxpc3QkKF9jb250ZXh0NzQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NzQucHJldiA9IF9jb250ZXh0NzQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDc0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UuZ2V0KCIiLmNvbmNhdChiYXNlVXJsLCAiYXBpL2FydGljbGUvYXJ0aWNsZV9jYXRlX2FkZCIpLCB7CiAgICAgICAgICAgICAgcGFyYW1zOiBwYXJhbXMKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDc0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ3NC5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3NC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vIOWMu+aCo+WIl+ihqAogIHBhdGllbnRMaXN0OiBmdW5jdGlvbiBwYXRpZW50TGlzdChwYXJhbXMpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gcGF0aWVudExpc3QkKF9jb250ZXh0NzUpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NzUucHJldiA9IF9jb250ZXh0NzUubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDc1Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UuZ2V0KCIiLmNvbmNhdChiYXNlVXJsLCAiYXBpL3JlY29yZC9yZWNvcmQiKSwgewogICAgICAgICAgICAgIHBhcmFtczogcGFyYW1zCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3NS5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0NzUuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NzUuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDmkJzntKIr5YiG6aG1CiAgc2VhY2hwYWc6IGZ1bmN0aW9uIHNlYWNocGFnKGRhdGEpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gc2VhY2hwYWckKF9jb250ZXh0NzYpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NzYucHJldiA9IF9jb250ZXh0NzYubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDc2Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9yZWNvcmQvcmVjb3JkIiksIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3Ni5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0NzYuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NzYuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDljLvmgqPmt7vliqAKICBwYXRpZW50QWRkOiBmdW5jdGlvbiBwYXRpZW50QWRkKGRhdGEpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gcGF0aWVudEFkZCQoX2NvbnRleHQ3NykgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3Ny5wcmV2ID0gX2NvbnRleHQ3Ny5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0NzcubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VydmljZS5wb3N0KCIiLmNvbmNhdChiYXNlVXJsLCAiYXBpL3JlY29yZC9hZGRyZWNvcmQiKSwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDc3LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ3Ny5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3Ny5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vIOmAieaLqeenkeWupCzmipXor4nkuovku7YKICBzZWxEZXA6IGZ1bmN0aW9uIHNlbERlcCgpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gc2VsRGVwJChfY29udGV4dDc4KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDc4LnByZXYgPSBfY29udGV4dDc4Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ3OC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLmdldCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9yZWNvcmQvYWRkcmVjb3JkIikpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3OC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0Nzguc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Nzguc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDngrnlh7vkuIrkvKDpmYTku7bmjInpkq4KICB1cExvZGU6IGZ1bmN0aW9uIHVwTG9kZShwYXJhbXMpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gdXBMb2RlJChfY29udGV4dDc5KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDc5LnByZXYgPSBfY29udGV4dDc5Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ3OS5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLmdldCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9yZWNvcmQvdXBsb2FkX2F0dGFjaG1lbnQiKSwgewogICAgICAgICAgICAgIHBhcmFtczogcGFyYW1zCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3OS5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0Nzkuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Nzkuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDkuIrkvKDpmYTku7Yg56Gu5a6aCiAgdXBsb2RlOiBmdW5jdGlvbiB1cGxvZGUoZGF0YSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiB1cGxvZGUkKF9jb250ZXh0ODApIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0ODAucHJldiA9IF9jb250ZXh0ODAubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDgwLm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UucG9zdCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9yZWNvcmQvdXBsb2FkX2F0dGFjaG1lbnQiKSwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDgwLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ4MC5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4MC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vIOWMu+aCo+ivpuaDhQogIGRldGFpbHM6IGZ1bmN0aW9uIGRldGFpbHMoZGF0YSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBkZXRhaWxzJChfY29udGV4dDgxKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDgxLnByZXYgPSBfY29udGV4dDgxLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ4MS5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLnBvc3QoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvcmVjb3JkL3JlY29yZF9kZXRhaWxzIiksIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4MS5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0ODEuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0ODEuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDop5LoibLmnYPpmZAKICByb2xlcG93bGlzdDogZnVuY3Rpb24gcm9sZXBvd2xpc3QoKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHJvbGVwb3dsaXN0JChfY29udGV4dDgyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDgyLnByZXYgPSBfY29udGV4dDgyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ4Mi5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLmdldCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9wYXJ0L2FkZGF1dGhncm91cCIpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0ODIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDgyLnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDgyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5paH5Lu25bqT5paw5aKe5YiG57G7bGlzdAogIGRvY2xpc3Q6IGZ1bmN0aW9uIGRvY2xpc3QoKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGRvY2xpc3QkKF9jb250ZXh0ODMpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0ODMucHJldiA9IF9jb250ZXh0ODMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDgzLm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2UuZ2V0KCIiLmNvbmNhdChiYXNlVXJsLCAiYXBpL2ZpbGVjbGFzcy9saXN0cyIpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0ODMuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDgzLnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDgzLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5paH5Lu25bqT5paw5aKe5YiG57G7dHJlZWxpc3QKICBkb2NhZGR0cmVlOiBmdW5jdGlvbiBkb2NhZGR0cmVlKCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBkb2NhZGR0cmVlJChfY29udGV4dDg0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDg0LnByZXYgPSBfY29udGV4dDg0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ4NC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLmdldCgiIi5jb25jYXQoYmFzZVVybCwgInVzZXIvRmlsZWNsYXNzL2NsYXNzdHJlZSIpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0ODQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDg0LnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDg0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5paH5Lu25bqT5paw5aKe5YiG57G7dHJlZQogIGRvY2FkZDogZnVuY3Rpb24gZG9jYWRkKGRhdGEpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZG9jYWRkJChfY29udGV4dDg1KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDg1LnByZXYgPSBfY29udGV4dDg1Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ4NS5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLnBvc3QoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvZmlsZWNsYXNzL2FkZGNsYXNzIiksIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4NS5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0ODUuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0ODUuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDmlofku7blupPmm7TmlLnnirbmgIEKICBkb2NzdGF0dTogZnVuY3Rpb24gZG9jc3RhdHUoZGF0YSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBkb2NzdGF0dSQoX2NvbnRleHQ4NikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4Ni5wcmV2ID0gX2NvbnRleHQ4Ni5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0ODYubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VydmljZS5wb3N0KCIiLmNvbmNhdChiYXNlVXJsLCAiYXBpL2ZpbGVjbGFzcy9lZGl0c3RhdHVzIiksIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4Ni5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0ODYuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0ODYuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDmlofku7blupNkZWwKICBkb2NkZWw6IGZ1bmN0aW9uIGRvY2RlbChkYXRhKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGRvY2RlbCQoX2NvbnRleHQ4NykgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4Ny5wcmV2ID0gX2NvbnRleHQ4Ny5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0ODcubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VydmljZS5wb3N0KCIiLmNvbmNhdChiYXNlVXJsLCAiYXBpL2ZpbGVjbGFzcy9kZWwiKSwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDg3LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ4Ny5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4Ny5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vIOaWh+S7tuW6k2VkaXQKICBkb2NlZGl0OiBmdW5jdGlvbiBkb2NlZGl0KHBhcmFtcykgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBkb2NlZGl0JChfY29udGV4dDg4KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDg4LnByZXYgPSBfY29udGV4dDg4Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ4OC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLmdldCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9maWxlY2xhc3MvZWRpdGNsYXNzIiksIHsKICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0ODguYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDg4LnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDg4LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5paH5Lu25bqTZWRpdHNhdmUKICBkb2NlZGl0c2F2ZTogZnVuY3Rpb24gZG9jZWRpdHNhdmUoZGF0YSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBkb2NlZGl0c2F2ZSQoX2NvbnRleHQ4OSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4OS5wcmV2ID0gX2NvbnRleHQ4OS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0ODkubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VydmljZS5wb3N0KCIiLmNvbmNhdChiYXNlVXJsLCAiYXBpL2ZpbGVjbGFzcy9lZGl0Y2xhc3MiKSwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDg5LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ4OS5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4OS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vIOaWh+S7tuW6k+aWh+S7tmxpc3QKICBmaWxlbGlzdDogZnVuY3Rpb24gZmlsZWxpc3QoKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGZpbGVsaXN0JChfY29udGV4dDkwKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDkwLnByZXYgPSBfY29udGV4dDkwLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ5MC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLmdldCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9maWxlL2xpc3RzIikpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5MC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0OTAuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OTAuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDmlofku7blupPmlofku7bliIbnsbsKICBmaWxldHJlZTogZnVuY3Rpb24gZmlsZXRyZWUoKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGZpbGV0cmVlJChfY29udGV4dDkxKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDkxLnByZXYgPSBfY29udGV4dDkxLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ5MS5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLmdldCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9maWxlL2FkZGZpbGUiKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkxLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ5MS5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5MS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIC8vIOaWh+S7tuW6k+aWh+S7tuS4iuS8oAogIGZpbGV1cGxvYWQ6IGZ1bmN0aW9uIGZpbGV1cGxvYWQoZGF0YSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBmaWxldXBsb2FkJChfY29udGV4dDkyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDkyLnByZXYgPSBfY29udGV4dDkyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ5Mi5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLnBvc3QoIiIuY29uY2F0KGJhc2VVcmwsICJhcGkvZmlsZS9hZGRmaWxlIiksIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5Mi5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0OTIuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OTIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDmlofku7blupMKICAvLyDmlofku7bliJfooagKICBGaWxlTGlzdDogZnVuY3Rpb24gRmlsZUxpc3QoKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIEZpbGVMaXN0JChfY29udGV4dDkzKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDkzLnByZXYgPSBfY29udGV4dDkzLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ5My5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLmdldCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9maWxlL2xpc3RTIikpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5My5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0OTMuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OTMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDmlrDlu7rliIbnsbvliJfooagKICBGaWxlQWRkTGlzdDogZnVuY3Rpb24gRmlsZUFkZExpc3QoKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIEZpbGVBZGRMaXN0JChfY29udGV4dDk0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDk0LnByZXYgPSBfY29udGV4dDk0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ5NC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlLmdldCgiIi5jb25jYXQoYmFzZVVybCwgImFwaS9maWxlY2xhc3MvbGlzdHMiKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDk0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ5NC5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5NC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9Cn07"},null]}