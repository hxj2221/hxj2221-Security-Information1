{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\src\\views\\H-Edit\\index.vue?vue&type=style&index=0&id=e510a928&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\src\\views\\H-Edit\\index.vue","mtime":1610953335017},{"path":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\2021后台\\Security-Information\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQpAaW1wb3J0ICJlZGl0LmNzcyI7DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2XA","file":"index.vue","sourceRoot":"src/views/H-Edit","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"H-edit\">\r\n      <div class=\"edit-top\">\r\n        <el-button type=\"primary\" @click=\"add\">添加权限</el-button>\r\n      </div>\r\n      <el-table\r\n        :data=\"tableData\"\r\n        style=\"width: 100%; margin-bottom: 20px\"\r\n        :header-cell-style=\"getRowClass\"\r\n        row-key=\"id\"\r\n        border\r\n        :tree-props=\"{\r\n          children: '_child',\r\n          hasChildren: 'hasChildren',\r\n          id: 'id',\r\n          title: 'title',\r\n          sort: 'sort',\r\n          icon: 'icon',\r\n          name: 'name',\r\n          url: 'url',\r\n        }\"\r\n      >\r\n        <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n        <el-table-column\r\n          type=\"\"\r\n          width=\"55\"\r\n          prop=\"sort\"\r\n          label=\"排序\"\r\n        ></el-table-column>\r\n        <el-table-column prop=\"title\" label=\"名称\" width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"level\" label=\"等级\" width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"icon\" label=\"左侧图标\">\r\n          <!-- <template slot-scope=\"scope\"> -->\r\n          <!-- <i class=\"el-icon-s-help\"></i> -->\r\n          <!-- </template> -->\r\n        </el-table-column>\r\n        <el-table-column prop=\"name\" label=\"接口地址\"></el-table-column>\r\n        <el-table-column prop=\"url\" label=\"前端路由\"> </el-table-column>\r\n        <el-table-column label=\"角色状态\">\r\n          <template slot-scope=\"scope\">\r\n            <el-switch\r\n              v-model=\"scope.row.status\"\r\n              :active-value=\"1\"\r\n              :inactive-value=\"0\"\r\n              active-color=\"#02538C\"\r\n              inactive-color=\"#B9B9B9\"\r\n            />\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column fixed=\"right\" label=\"操作\" width=\"400\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              @click=\"handleClick(scope.row.id)\"\r\n              type=\"text\"\r\n              size=\"small\"\r\n              >添加子级</el-button\r\n            >\r\n            <el-button\r\n              type=\"text\"\r\n              size=\"small\"\r\n              @click=\"handleEdit(scope.row.id)\"\r\n              >编辑</el-button\r\n            >\r\n            <el-button type=\"text\" size=\"small\" @click=\"delpow(scope.row.id)\"\r\n              >删除</el-button\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <!-- 添加权限 -->\r\n      <div>\r\n        <el-dialog\r\n          title=\"添加权限\"\r\n          :visible.sync=\"dialogVisible\"\r\n          width=\"width\"\r\n          :before-close=\"dialogeditright\"\r\n        >\r\n          <el-form label-width=\"80px\" ref=\"editForm\">\r\n            <el-form-item prop=\"staffName\" label=\"上级\" width=\"120\">\r\n              <el-select\r\n                v-model=\"selvalue\"\r\n                @change=\"selchang\"\r\n                placeholder=\"请选择\"\r\n              >\r\n                <el-option label=\"作为顶级\" value=\"0\"> </el-option>\r\n                <template v-for=\"v in seldata\">\r\n                  <el-option\r\n                    :key=\"v.id\"\r\n                    :label=\"v.title\"\r\n                    :value=\"v.id\"\r\n                  ></el-option>\r\n                  <template v-if=\"v._child\">\r\n                    <el-option\r\n                      v-for=\"vv in v._child\"\r\n                      :key=\"vv.id\"\r\n                      :label=\"'|——' + vv.title\"\r\n                      :value=\"vv.id\"\r\n                    >\r\n                    </el-option>\r\n                  </template>\r\n                </template>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"排序\" width=\"100\">\r\n              <el-input v-model=\"powpx\" auto-complete=\"off\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"状态\" width=\"100\">\r\n              <el-input v-model=\"powstatu\" auto-complete=\"off\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"标题\" width=\"150\">\r\n              <el-input v-model=\"powlab\" auto-complete=\"off\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"图标\" width=\"120\">\r\n              <el-input v-model=\"powicon\" auto-complete=\"off\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"后端接口\" width=\"120\">\r\n              <el-input v-model=\"powaps\" auto-complete=\"off\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"前端路由\" width=\"120\">\r\n              <el-input v-model=\"powweb\" auto-complete=\"off\"></el-input>\r\n            </el-form-item>\r\n          </el-form>\r\n          <div slot=\"footer\">\r\n            <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"dialog\">确 定</el-button>\r\n          </div>\r\n        </el-dialog>\r\n      </div>\r\n      <!-- 添加子级 -->\r\n\r\n      <!-- 编辑权限 -->\r\n      <div>\r\n        <el-dialog\r\n          title=\"编辑权限\"\r\n          :visible.sync=\"dialogedit\"\r\n          width=\"width\"\r\n          :before-close=\"dialogBeforeCl\"\r\n        >\r\n          <el-form label-width=\"80px\" ref=\"editForm\">\r\n            <el-form-item label=\"上级\" width=\"120\">\r\n              <el-select\r\n                v-model=\"editselvalue\"\r\n                @change=\"selchang\"\r\n                placeholder=\"请选择\"\r\n              >\r\n                <el-option label=\"作为顶级\" :value=\"0\"></el-option>\r\n                <template v-for=\"v in editseldata\">\r\n                  <el-option\r\n                    :key=\"v.id\"\r\n                    :label=\"v.title\"\r\n                    :value=\"v.id\"\r\n                  ></el-option>\r\n                  <template v-if=\"v._child\">\r\n                    <el-option\r\n                      v-for=\"vv in v._child\"\r\n                      :key=\"vv.id\"\r\n                      :label=\"'|——' + vv.title\"\r\n                      :value=\"vv.id\"\r\n                    >\r\n                    </el-option>\r\n                  </template>\r\n                </template>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"排序\" width=\"100\">\r\n              <el-input v-model=\"editpowpx\" auto-complete=\"off\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"状态\" width=\"100\">\r\n              <el-input v-model=\"editpowstatu\" auto-complete=\"off\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"标题\" width=\"150\">\r\n              <el-input v-model=\"editpowlab\" auto-complete=\"off\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"图标\" width=\"120\">\r\n              <el-input v-model=\"editpowicon\" auto-complete=\"off\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"后端接口\" width=\"120\">\r\n              <el-input v-model=\"editpowaps\" auto-complete=\"off\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"前端路由\" width=\"120\">\r\n              <el-input v-model=\"editpowweb\" auto-complete=\"off\"></el-input>\r\n            </el-form-item>\r\n          </el-form>\r\n          <div slot=\"footer\">\r\n            <el-button @click=\"dialogedit = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"editdialog\">确 定</el-button>\r\n          </div>\r\n        </el-dialog>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport service from \"@/service/index\";\r\nexport default {\r\n  inject: [\"reload\"],\r\n  data() {\r\n    return {\r\n      name: \"\", //权限名\r\n      dialogVisible: false,\r\n      dialogedit: false,\r\n      dialogaddson: false,\r\n      tableData: [],\r\n      seldata: [], //权限下拉框\r\n      selvalue: \"0\",\r\n      powpx: \"\",\r\n      powstatu: \"\",\r\n      powlab: \"\",\r\n      powicon: \"\",\r\n      powaps: \"\",\r\n      powweb: \"\",\r\n      editseldata: [],\r\n      editselvalue: 2,\r\n      editpowpx: \"\",\r\n      editpowstatu: \"\",\r\n      editpowlab: \"\",\r\n      editpowicon: \"\",\r\n      editpowaps: \"\",\r\n      editpowweb: \"\",\r\n      editid: \"\",\r\n      addsonseldata: [],\r\n      addsonselvalue: 2,\r\n      addsonpowpx: \"\",\r\n      addsonpowstatu: \"\",\r\n      addsonpowlab: \"\",\r\n      addsonpowicon: \"\",\r\n      addsonpowaps: \"\",\r\n      addsonpowweb: \"\",\r\n      addsonid: \"\",\r\n    };\r\n  },\r\n  created() {\r\n    service.rulelist().then((res) => {\r\n      console.log(res);\r\n      this.tableData = res.data;\r\n    });\r\n  },\r\n  methods: {\r\n    selchang() {\r\n      console.log(this.editselvalue);\r\n    },\r\n    // 权限确认\r\n    dialog() {\r\n      let data = {\r\n        sort: this.powpx,\r\n        status: this.powstatu,\r\n        title: this.powlab,\r\n        icon: this.powicon,\r\n        pid: this.selvalue,\r\n        name: this.powaps,\r\n        url: this.powweb,\r\n      };\r\n      service.savepower(data).then((res) => {\r\n        //alert(res);\r\n        console.log(res);\r\n        this.reload();\r\n      });\r\n      this.dialogVisible = false;\r\n    },\r\n    // 添加权限\r\n    add() {\r\n      this.dialogVisible = true;\r\n      this.selvalue = \"0\";\r\n      service.addpower().then((res) => {\r\n        console.log(res);\r\n        this.seldata = res.data;\r\n      });\r\n    },\r\n    // 权限编辑\r\n    // 编辑\r\n    handleEdit(id) {\r\n      this.dialogedit = true;\r\n      console.log(id);\r\n      let param = {\r\n        id: id,\r\n      };\r\n      service.getpowid(param).then((res) => {\r\n        console.log(res.data);\r\n        this.editseldata = res.data.lists;\r\n        this.editselvalue = res.data.info.pid;\r\n        this.editpowpx = res.data.info.sort;\r\n        this.editpowstatu = res.data.info.status;\r\n        this.editpowlab = res.data.info.title;\r\n        this.editpowicon = res.data.info.icon;\r\n        this.editpowaps = res.data.info.name;\r\n        this.editid = res.data.info.id;\r\n        this.editpowweb = res.data.info.url;\r\n      });\r\n    },\r\n    // 添加下级\r\n    handleClick(id) {\r\n      this.dialogVisible = true;\r\n      console.log(id);\r\n      let param = {\r\n        id: id,\r\n      };\r\n      service.addpower().then((res) => {\r\n        console.log(res);\r\n        this.seldata = res.data;\r\n      });\r\n      service.getpowid(param).then((res) => {\r\n        console.log(res.data);\r\n        this.addsonseldata = res.data.lists;\r\n        this.addsonselvalue = res.data.info.pid;\r\n        this.selvalue = res.data.info.id;\r\n      });\r\n    },\r\n    // 添加下级确认\r\n    addsondialog() {\r\n      let data = {\r\n        sort: this.addsonpowpx,\r\n        status: this.addsonpowstatu,\r\n        name: this.addsonpowaps,\r\n        icon: this.addsonpowicon,\r\n        title: this.addsonpowlab,\r\n        pid: this.addsonselvalue,\r\n        id: this.addsonid,\r\n        url: this.addsonpowweb,\r\n      };\r\n      service.savepower(data).then((res) => {\r\n        console.log(res);\r\n      });\r\n    },\r\n    // 编辑权限确认\r\n    editdialog() {\r\n      let data = {\r\n        sort: this.editpowpx,\r\n        status: this.editpowstatu,\r\n        name: this.editpowaps,\r\n        icon: this.editpowicon,\r\n        title: this.editpowlab,\r\n        pid: this.editselvalue,\r\n        id: this.editid,\r\n        url: this.editpowweb,\r\n      };\r\n      console.log(data);\r\n      service.editsavepower(data).then((res) => {\r\n        console.log(res);\r\n        if ((res.code = \"20010\")) {\r\n          this.reload();\r\n        }\r\n      });\r\n      this.dialogedit = false;\r\n    },\r\n    delpow(id) {\r\n      console.log(id);\r\n      let param = {\r\n        id: id,\r\n      };\r\n      service.delpow(param).then((res) => {\r\n        console.log(res);\r\n        if (res.code == \"20010\") {\r\n          this.reload();\r\n        }\r\n      });\r\n    },\r\n    dialogeditright() {\r\n      this.dialogVisible = false;\r\n    },\r\n    dialogBeforeCl() {\r\n      this.dialogedit = false;\r\n    },\r\n\r\n    getRowClass({ rowIndex }) {\r\n      if (rowIndex == 0) {\r\n        return \"background:#c2c5f6;color:#000\";\r\n      } else {\r\n        return \"\";\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import \"edit.css\";\r\n</style>"]}]}