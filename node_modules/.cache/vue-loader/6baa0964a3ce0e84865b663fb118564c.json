{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\src\\views\\H-Technological\\components\\flowMain.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\src\\views\\H-Technological\\components\\flowMain.vue","mtime":1609551113289},{"path":"C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\22\\hxj2221-Security-Information1\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7anNQbHVtYn0gZnJvbSAnanNwbHVtYicKaW1wb3J0IGZsb3dOb2RlIGZyb20gJy4vZmxvd05vZGUudnVlJwppbXBvcnQgZWRpdEZsb3cgZnJvbSAnLi9lZGl0Rmxvdy52dWUnCmltcG9ydCBlZGl0Tm9kZSBmcm9tICcuL2VkaXROb2RlLnZ1ZScKaW1wb3J0IGVkaXRMaW5lIGZyb20gJy4vZWRpdExpbmUudnVlJwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2Zsb3dNYWluJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbWVudWVMaXN0OiBbewogICAgICAgICAgdHlwZTogMSwKICAgICAgICAgIG5hbWU6ICfotbfngrknLAogICAgICAgICAgCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0eXBlOiAyLAogICAgICAgICAgbmFtZTogJ+e7iOeCuScsCiAgICAgICAgfSwKICAgICAgICAKICAgICAgXSwKICAgICAganNQbHVtYjogbnVsbCwgLy8ganNQbHVtYiDlrp7kvosKICAgICAgaW5kZXg6IDEsCiAgICAgIC8vIOm7mOiupOiuvue9ruWPguaVsAogICAgICBqc3BsdW1iU2V0dGluZzogewogICAgICAgIC8vIOWKqOaAgemUmueCueOAgeS9jee9ruiHqumAguW6lAogICAgICAgIEFuY2hvcnM6IFsnVG9wJywgJ1RvcENlbnRlcicsICdUb3BSaWdodCcsICdUb3BMZWZ0JywgJ1JpZ2h0JywgJ1JpZ2h0TWlkZGxlJywgJ0JvdHRvbScsICdCb3R0b21DZW50ZXInLAogICAgICAgICAgJ0JvdHRvbVJpZ2h0JywgJ0JvdHRvbUxlZnQnLCAnTGVmdCcsICdMZWZ0TWlkZGxlJwogICAgICAgIF0sCiAgICAgICAgQ29udGFpbmVyOiAnZmxvd0NvbnRlbnQnLAogICAgICAgIC8vIOi/nue6v+eahOagt+W8jyBTdGF0ZU1hY2hpbmXjgIFGbG93Y2hhcnQs5pyJ5Zub56eN6buY6K6k57G75Z6L77yaQmV6aWVy77yI6LSd5aGe5bCU5puy57q/77yJ77yMU3RyYWlnaHTvvIjnm7Tnur/vvInvvIxGbG93Y2hhcnTvvIjmtYHnqIvlm77vvInvvIxTdGF0ZSBtYWNoaW5l77yI54q25oCB5py677yJCiAgICAgICAgQ29ubmVjdG9yOiAnU3RyYWlnaHQnLAogICAgICAgIC8v6L+Z5Liq5piv6byg5qCH5ouJ5Ye65p2l55qE57q/55qE5bGe5oCnCiAgICAgICAgQ29ubmVjdGlvbk92ZXJsYXlzOiBbCiAgICAgICAgICBbIkxhYmVsIiwgewogICAgICAgICAgICBsYWJlbDogIui/nue6v+aWh+acrCIsCiAgICAgICAgICAgIGlkOiAibGFiZWwtMSIsCiAgICAgICAgICAgIGNzc0NsYXNzOiAiY3NzbGFiZWwiCiAgICAgICAgICB9XQogICAgICAgIF0sCiAgICAgICAgLy8g6byg5qCH5LiN6IO95ouW5Yqo5Yig6Zmk57q/CiAgICAgICAgQ29ubmVjdGlvbnNEZXRhY2hhYmxlOiBmYWxzZSwKICAgICAgICAvLyDliKDpmaTnur/nmoTml7blgJnoioLngrnkuI3liKDpmaQKICAgICAgICBEZWxldGVFbmRwb2ludHNPbkRldGFjaDogZmFsc2UsCiAgICAgICAgLy8g6L+e57q/55qE56uv54K5CiAgICAgICAgLy8gRW5kcG9pbnQ6IFsiRG90Iiwge3JhZGl1czogNX1dLAogICAgICAgIEVuZHBvaW50OiBbIlJlY3RhbmdsZSIsIHsKICAgICAgICAgIGhlaWdodDogMTAsCiAgICAgICAgICB3aWR0aDogMTAKICAgICAgICB9XSwKICAgICAgICAvLyDnur/nq6/ngrnnmoTmoLflvI8KICAgICAgICBFbmRwb2ludFN0eWxlOiB7CiAgICAgICAgICBmaWxsOiAncmdiYSgyNTUsMjU1LDI1NSwwKScsCiAgICAgICAgICBvdXRsaW5lV2lkdGg6IDEKICAgICAgICB9LAogICAgICAgIExvZ0VuYWJsZWQ6IHRydWUsIC8v5piv5ZCm5omT5byAanNQbHVtYueahOWGhemDqOaXpeW/l+iusOW9lQogICAgICAgIC8vIOe7mOWItue6vwogICAgICAgIFBhaW50U3R5bGU6IHsKICAgICAgICAgIHN0cm9rZTogJyM0MDllZmYnLAogICAgICAgICAgc3Ryb2tlV2lkdGg6IDIKICAgICAgICB9LAogICAgICAgIC8vIOe7mOWItueureWktAogICAgICAgIE92ZXJsYXlzOiBbCiAgICAgICAgICBbJ0Fycm93JywgewogICAgICAgICAgICB3aWR0aDogOCwKICAgICAgICAgICAgbGVuZ3RoOiA4LAogICAgICAgICAgICBsb2NhdGlvbjogMQogICAgICAgICAgfV0sCiAgICAgICAgXSwKICAgICAgICBSZW5kZXJNb2RlOiAic3ZnIgogICAgICB9LAogICAgICAvLyBqc3BsdW1i6L+e5o6l5Y+C5pWwCiAgICAgIGpzcGx1bWJDb25uZWN0T3B0aW9uczogewogICAgICAgIGlzU291cmNlOiB0cnVlLAogICAgICAgIGlzVGFyZ2V0OiB0cnVlLAogICAgICAgIC8vIOWKqOaAgemUmueCueOAgeaPkOS+m+S6hjTkuKrmlrnlkJEgQ29udGludW91c+OAgUF1dG9EZWZhdWx0CiAgICAgICAgYW5jaG9yOiAiQ29udGludW91cyIsCiAgICAgIH0sCiAgICAgIGpzcGx1bWJTb3VyY2VPcHRpb25zOiB7CiAgICAgICAgZmlsdGVyOiAiLmZsb3ctbm9kZS1kcmFnIiwgIC8v6Kem5Y+R6L+e57q/55qE5Yy65Z+fCiAgICAgICAgLyoic3BhbiLooajnpLrmoIfnrb7vvIwiLmNsYXNzTmFtZSLooajnpLrnsbvvvIwiI2lkIuihqOekuuWFg+e0oGlkKi8KICAgICAgICBmaWx0ZXJFeGNsdWRlOiBmYWxzZSwKICAgICAgICBhbmNob3I6ICJDb250aW51b3VzIiwKICAgICAgICBhbGxvd0xvb3BiYWNrOiBmYWxzZQogICAgICB9LAogICAgICBqc3BsdW1iVGFyZ2V0T3B0aW9uczogewogICAgICAgIGZpbHRlcjogIi5mbG93LW5vZGUtZHJhZyIsCiAgICAgICAgLyoic3BhbiLooajnpLrmoIfnrb7vvIwiLmNsYXNzTmFtZSLooajnpLrnsbvvvIwiI2lkIuihqOekuuWFg+e0oGlkKi8KICAgICAgICBmaWx0ZXJFeGNsdWRlOiBmYWxzZSwKICAgICAgICBhbmNob3I6ICJDb250aW51b3VzIiwKICAgICAgICBhbGxvd0xvb3BiYWNrOiBmYWxzZQogICAgICB9LAogICAgICAvLyDmmK/lkKbliqDovb3lrozmr5UKICAgICAgbG9hZEVhc3lGbG93RmluaXNoOiBmYWxzZSwKICAgICAgLy8g5pWw5o2uCiAgICAgIGRhdGE6IHsKICAgICAgICBmbG93SW5mbzogewogICAgICAgICAgSWQ6IHRoaXMuZ2V0VVVJRCgpLAogICAgICAgICAgTmFtZTogJ+aIkeeahOa1geeoiycsCiAgICAgICAgICBSZW1hcms6ICcnLAogICAgICAgIH0sCiAgICAgICAgbm9kZUxpc3Q6IFtdLAogICAgICAgIGxpbmVMaXN0OiBbXQogICAgICB9LAogICAgICBjdXJyZW50SXRlbTogJycsIC8v5Li05pe25a2Y5re75Yqg55qE5YWD57SgCiAgICAgIGlzQ29ubmVjdDogZmFsc2UsIC8v5Yik5pat5piv5ZCm6L+e5o6lCiAgICAgIHRpbWVyOiBudWxsLCAvL+WumuaXtuWZqCzliKTmlq3ljZXlj4zlh7ssCiAgICAgIGN1cnJlbnRDb25uZWN0OiAnJywgLy/lvZPliY3nmoTov57mjqXnur8KICAgICAgY3VycmVudExpbmU6ICcnLCAvL+W9k+WJjei/nuaOpee6v+aVsOaNrgogICAgICBlZGl0VHlwZTogJycsIC8v57yW6L6R55qE57G75Z6LCiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBmbG93Tm9kZSwKICAgIGVkaXRGbG93LAogICAgZWRpdE5vZGUsCiAgICBlZGl0TGluZQogIH0sCiAgY3JlYXRlZCgpIHt9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmpzUGx1bWIgPSBqc1BsdW1iLmdldEluc3RhbmNlKCk7CiAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgIHRoaXMuaW5pdCgpOwogICAgfSk7CiAgICB0aGlzLmVkaXRGbG93KCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQoKSB7CiAgICAgIGNvbnN0IF90aGlzID0gdGhpcwogICAgICB0aGlzLmpzUGx1bWIucmVhZHkoZnVuY3Rpb24oKSB7CgogICAgICAgIC8vIOWvvOWFpem7mOiupOmFjee9rgogICAgICAgIF90aGlzLmpzUGx1bWIuaW1wb3J0RGVmYXVsdHMoX3RoaXMuanNwbHVtYlNldHRpbmcpCiAgICAgICAgLy8g5Lya5L2/5pW05LiqanNQbHVtYueri+WNs+mHjee7mOOAggogICAgICAgIF90aGlzLmpzUGx1bWIuc2V0U3VzcGVuZERyYXdpbmcoZmFsc2UsIHRydWUpOwogICAgICAgIC8vIOWIneWni+WMluiKgueCuQogICAgICAgIF90aGlzLmxvYWRFYXN5RmxvdygpCgogICAgICAgIC8vIOWNleeCuei/nuaOpee6v++8iOe8lui+kWxhYmVs77yJLAogICAgICAgIF90aGlzLmpzUGx1bWIuYmluZCgnY2xpY2snLCBmdW5jdGlvbihjb25uLCBvcmlnaW5hbEV2ZW50KSB7CiAgICAgICAgICAvL2NsZWFyVGltZW91dCh0aGlzLnRpbWVyKTsKICAgICAgICAgIC8vdGhpcy50aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyAvLyDov5nph4zph4fnlKjmiafooYzoh6rlrprkuYnkuovku7bnmoTmlrnlvI8KICAgICAgICAgIC8vICAgIGNvbnNvbGUubG9nKCJjbGljayIsIGNvbm4pOwogICAgICAgICAgLy8gICAgX3RoaXMuZWRpdExpbmUoY29ubik7CiAgICAgICAgICAvL30sIDMwMCk7IC8vIOW7tui/nzMwMG1z5omn6KGM5Y2V5Ye75LqL5Lu2LOWMuuWIhuWPjOWHu+S6i+S7tgogICAgICAgICAgY29uc29sZS5sb2coImNsaWNrIiwgY29ubik7CiAgICAgICAgICBfdGhpcy5lZGl0TGluZShjb25uKTsKICAgICAgICAgIGNvbnNvbGUubG9nKGNvbm4uZ2V0T3ZlcmxheSgibGFiZWwtMSIpKTsKICAgICAgICAgIC8vY29ubi5nZXRPdmVybGF5KCJsYWJlbC0xIikuc2V0TGFiZWwoJ+Wkp+iCpeiCmicpOyAvL+WIneWni+WMlmxhYmVsCiAgICAgICAgfSkKICAgICAgICAvLyDlj4zlh7vov57mjqXnur/vvIjliKDpmaTvvIksCiAgICAgICAgX3RoaXMuanNQbHVtYi5iaW5kKCdkYmxjbGljaycsIGZ1bmN0aW9uIChjb25uLCBvcmlnaW5hbEV2ZW50KSB7CiAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpOwogICAgICAgICAgIGNvbnNvbGUubG9nKCJkYmxjbGljayIsIGNvbm4pCgogICAgICAgICAgIF90aGlzLiRjb25maXJtKCfnoa7lrprliKDpmaTmiYDngrnlh7vnmoTnur/lkJc/JywgJ+aPkOekuicsIHsKICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgIF90aGlzLmpzUGx1bWIuZGVsZXRlQ29ubmVjdGlvbihjb25uKQogICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsgfSkKICAgICAgICB9KQogICAgICAgIC8vIOi/nue6vwogICAgICAgIF90aGlzLmpzUGx1bWIuYmluZCgiY29ubmVjdGlvbiIsIGZ1bmN0aW9uKGV2dCkgewogICAgICAgICAgY29uc29sZS5sb2coJ2Nvbm5lY3Rpb24nLCBldnQpCiAgICAgICAgICBsZXQgZnJvbSA9IGV2dC5zb3VyY2UuaWQKICAgICAgICAgIGxldCB0byA9IGV2dC50YXJnZXQuaWQKICAgICAgICAgIGlmIChfdGhpcy5sb2FkRWFzeUZsb3dGaW5pc2gpIHsKICAgICAgICAgICAgX3RoaXMuZGF0YS5saW5lTGlzdC5wdXNoKHsKICAgICAgICAgICAgICBmcm9tOiBmcm9tLAogICAgICAgICAgICAgIHRvOiB0bywKICAgICAgICAgICAgICBsYWJlbDogJ+i/nue6v+WQjeensCcsCiAgICAgICAgICAgICAgaWQ6IF90aGlzLmdldFVVSUQoKSwKICAgICAgICAgICAgICBSZW1hcms6ICcnLAogICAgICAgICAgICB9KQogICAgICAgICAgfTsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIF90aGlzLmVkaXRMaW5lKGV2dC5jb25uZWN0aW9uKTsKICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgfSkKCiAgICAgICAgLy8g5Yig6Zmk6L+e57q/CiAgICAgICAgX3RoaXMuanNQbHVtYi5iaW5kKCJjb25uZWN0aW9uRGV0YWNoZWQiLCBmdW5jdGlvbihldnQpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdjb25uZWN0aW9uRGV0YWNoZWQnLCBldnQpCiAgICAgICAgICBfdGhpcy5kZWxldGVMaW5lKGV2dC5zb3VyY2VJZCwgZXZ0LnRhcmdldElkKQogICAgICAgIH0pCgogICAgICAgIC8vIOaUueWPmOe6v+eahOi/nuaOpeiKgueCuQogICAgICAgIF90aGlzLmpzUGx1bWIuYmluZCgiY29ubmVjdGlvbk1vdmVkIiwgZnVuY3Rpb24oZXZ0KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnY29ubmVjdGlvbk1vdmVkJywgZXZ0KQogICAgICAgICAgX3RoaXMuY2hhbmdlTGluZShldnQub3JpZ2luYWxTb3VyY2VJZCwgZXZ0Lm9yaWdpbmFsVGFyZ2V0SWQpCiAgICAgICAgfSkKCiAgICAgICAgLy8g5Y2V5Ye7ZW5kcG9pbnQKICAgICAgICAvLyBqc1BsdW1iLmJpbmQoImVuZHBvaW50Q2xpY2siLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgICAgLy8gICBjb25zb2xlLmxvZygnZW5kcG9pbnRDbGljaycsIGV2dCkKICAgICAgICAvLyB9KQogICAgICAgIC8vCiAgICAgICAgLy8gLy8g5Y+M5Ye7ZW5kcG9pbnQKICAgICAgICAvLyBqc1BsdW1iLmJpbmQoImVuZHBvaW50RGJsQ2xpY2siLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgICAgLy8gICBjb25zb2xlLmxvZygnZW5kcG9pbnREYmxDbGljaycsIGV2dCkKICAgICAgICAvLyB9KQoKICAgICAgICAvLyBjb250ZXh0bWVudSDlj7PplK4KICAgICAgICBfdGhpcy5qc1BsdW1iLmJpbmQoImNvbnRleHRtZW51IiwgZnVuY3Rpb24oZXZ0KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnY29udGV4dG1lbnUnLCBldnQpCiAgICAgICAgfSkKCgogICAgICAgIC8vIGJlZm9yZURyb3AKICAgICAgICBfdGhpcy5qc1BsdW1iLmJpbmQoImJlZm9yZURyb3AiLCBmdW5jdGlvbihldnQpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdiZWZvcmVEcm9wJywgZXZ0KQogICAgICAgICAgbGV0IGZyb20gPSBldnQuc291cmNlSWQKICAgICAgICAgIGxldCB0byA9IGV2dC50YXJnZXRJZAogICAgICAgICAgaWYgKGZyb20gPT09IHRvKSB7CiAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKCfkuI3og73ov57mjqXoh6rlt7EnKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgICB9CiAgICAgICAgICBpZiAoX3RoaXMuaGFzTGluZShmcm9tLCB0bykpIHsKICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4jeiDvemHjeWkjei/nue6vycpOwogICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICAgIH0KICAgICAgICAgIGlmIChfdGhpcy5oYXNoT3Bwb3NpdGVMaW5lKGZyb20sIHRvKSkgewogICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcign5LiN6IO95Zue546v5ZOmJyk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRydWUKICAgICAgICB9KQoKICAgICAgICAvLyBiZWZvcmVEZXRhY2gKICAgICAgICBfdGhpcy5qc1BsdW1iLmJpbmQoImJlZm9yZURldGFjaCIsIGZ1bmN0aW9uKGV2dCkgewogICAgICAgICAgY29uc29sZS5sb2coJ2JlZm9yZURldGFjaCcsIGV2dCkKICAgICAgICB9KQogICAgICB9KQoKICAgIH0sCiAgICAvLyDliqDovb3mtYHnqIvlm74KICAgIGxvYWRFYXN5RmxvdygpIHsKCiAgICAgIC8vIOWIneWni+WMluiKgueCuQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZGF0YS5ub2RlTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIGxldCBub2RlID0gdGhpcy5kYXRhLm5vZGVMaXN0W2ldCiAgICAgICAgLy8g6K6+572u5rqQ54K577yM5Y+v5Lul5ouW5Ye657q/6L+e5o6l5YW25LuW6IqC54K5CiAgICAgICAgdGhpcy5qc1BsdW1iLm1ha2VTb3VyY2Uobm9kZS5pZCwgdGhpcy5qc3BsdW1iU291cmNlT3B0aW9ucykKICAgICAgICAvLyAvLyDorr7nva7nm67moIfngrnvvIzlhbbku5bmupDngrnmi5blh7rnmoTnur/lj6/ku6Xov57mjqXor6XoioLngrkKICAgICAgICB0aGlzLmpzUGx1bWIubWFrZVRhcmdldChub2RlLmlkLCB0aGlzLmpzcGx1bWJUYXJnZXRPcHRpb25zKQogICAgICAgIC8vIGpzUGx1bWIuYWRkRW5kcG9pbnQobm9kZS5pZCkKICAgICAgICAvLyDorr7nva7lj6/mi5bmi70KICAgICAgICAvLyBqc1BsdW1iLmRyYWdnYWJsZShub2RlLmlkLCB7CiAgICAgICAgLy8gICAgIGNvbnRhaW5tZW50OiAncGFyZW50JywKICAgICAgICAvLyAgICAgZ3JpZDogWzEwLCAxMF0KICAgICAgICAvLyB9KQoKICAgICAgICB0aGlzLmpzUGx1bWIuZHJhZ2dhYmxlKG5vZGUuaWQsIHsKICAgICAgICAgIGNvbnRhaW5tZW50OiAncGFyZW50JwogICAgICAgIH0pCgogICAgICAgIC8vIGpzUGx1bWIuZHJhZ2dhYmxlKG5vZGUuaWQpCiAgICAgIH0KCiAgICAgIC8vIOWIneWni+WMlui/nue6vwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZGF0YS5saW5lTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIGxldCBsaW5lID0gdGhpcy5kYXRhLmxpbmVMaXN0W2ldCiAgICAgICAgbGV0IGNvbm5lY3Rpb24gPSB0aGlzLmpzUGx1bWIuY29ubmVjdCh7CiAgICAgICAgICBzb3VyY2U6IGxpbmUuZnJvbSwKICAgICAgICAgIHRhcmdldDogbGluZS50bywKICAgICAgICB9LCB0aGlzLmpzcGx1bWJDb25uZWN0T3B0aW9ucyk7CgogICAgICAgIGNvbm5lY3Rpb24uZ2V0T3ZlcmxheSgibGFiZWwtMSIpLnNldExhYmVsKGxpbmUubGFiZWwpOyAvL+WIneWni+WMlmxhYmVsCiAgICAgIH0KICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5sb2FkRWFzeUZsb3dGaW5pc2ggPSB0cnVlCiAgICAgIH0pCiAgICB9LAogICAgLy8g5re75Yqg5paw55qE6IqC54K5CiAgICBhZGROb2RlKHRlbXApIHsKICAgICAgY29uc29sZS5sb2coJ+a3u+WKoOiKgueCuScsIHRlbXApCiAgICAgIHRoaXMuZGF0YS5ub2RlTGlzdC5wdXNoKHRlbXApOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpIHsKICAgICAgICB0aGlzLmpzUGx1bWIubWFrZVNvdXJjZSh0ZW1wLmlkLCB0aGlzLmpzcGx1bWJTb3VyY2VPcHRpb25zKQogICAgICAgIHRoaXMuanNQbHVtYi5tYWtlVGFyZ2V0KHRlbXAuaWQsIHRoaXMuanNwbHVtYlRhcmdldE9wdGlvbnMpCiAgICAgICAgdGhpcy5qc1BsdW1iLmRyYWdnYWJsZSh0ZW1wLmlkLCB7CiAgICAgICAgICBjb250YWlubWVudDogJ3BhcmVudCcKICAgICAgICB9KQoKICAgICAgfSkKICAgIH0sCiAgICAvLyDliKDpmaTnur8KICAgIGRlbGV0ZUxpbmUoZnJvbSwgdG8pIHsKICAgICAgdGhpcy5kYXRhLmxpbmVMaXN0ID0gdGhpcy5kYXRhLmxpbmVMaXN0LmZpbHRlcihmdW5jdGlvbihsaW5lKSB7CiAgICAgICAgcmV0dXJuIGxpbmUuZnJvbSAhPT0gZnJvbSAmJiBsaW5lLnRvICE9PSB0bwogICAgICB9KQogICAgfSwKICAgIC8vIOaUueWPmOi/nue6vwogICAgY2hhbmdlTGluZShvbGRGcm9tLCBvbGRUbykgewogICAgICB0aGlzLmRlbGV0ZUxpbmUob2xkRnJvbSwgb2xkVG8pCiAgICB9LAogICAgLy8g5pS55Y+Y6IqC54K555qE5L2N572uCiAgICBjaGFuZ2VOb2RlU2l0ZShkYXRhKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5kYXRhLm5vZGVMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IG5vZGUgPSB0aGlzLmRhdGEubm9kZUxpc3RbaV0KICAgICAgICBpZiAobm9kZS5pZCA9PT0gZGF0YS5ub2RlSWQpIHsKICAgICAgICAgIG5vZGUubGVmdCA9IGRhdGEubGVmdAogICAgICAgICAgbm9kZS50b3AgPSBkYXRhLnRvcAogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8v5Yig6Zmk6IqC54K5CiAgICBkZWxldGVOb2RlKG5vZGVJZCkgewogICAgICB0aGlzLiRjb25maXJtKCfnoa7lrpropoHliKDpmaToioLngrknICsgbm9kZUlkICsgJz8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgICAgY2xvc2VPbkNsaWNrTW9kYWw6IGZhbHNlCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIC8vIHRoaXMuZGF0YS5ub2RlTGlzdCA9IHRoaXMuZGF0YS5ub2RlTGlzdC5maWx0ZXIoZnVuY3Rpb24obm9kZSkgewogICAgICAgIC8vIAlpZiAobm9kZS5pZCA9PT0gbm9kZUlkKSB7CiAgICAgICAgLy8gCQlub2RlLnNob3cgPSBmYWxzZQogICAgICAgIC8vIAl9CiAgICAgICAgLy8gCXJldHVybiB0cnVlCiAgICAgICAgLy8gfSkKICAgICAgICB0aGlzLmRhdGEubm9kZUxpc3QuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgIGlmIChpdGVtLmlkID09PSBub2RlSWQpIHsKICAgICAgICAgICAgdGhpcy5kYXRhLm5vZGVMaXN0LnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICB9CiAgICAgICAgfSkKCiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygn5Yig6ZmkJyArIG5vZGVJZCkKICAgICAgICAgIHRoaXMuanNQbHVtYi5yZW1vdmVBbGxFbmRwb2ludHMobm9kZUlkKTsKICAgICAgICB9KQogICAgICB9KS5jYXRjaCgoKSA9PiB7fSkKICAgICAgcmV0dXJuIHRydWUKICAgIH0sCiAgICAvL+e8lui+keiKgueCuQogICAgZWRpdE5vZGUobm9kZUlkKSB7CiAgICAgIC8vY29uc29sZS5sb2coJ+e8lui+keiKgueCuScsIG5vZGVJZCkKICAgICAgdGhpcy5lZGl0VHlwZSA9ICdub2RlJzsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy4kcmVmcy5ub2RlRm9ybS5pbml0KHRoaXMuZGF0YSwgbm9kZUlkKQogICAgICB9KQogICAgfSwKICAgIGVkaXRMaW5lKGNvbm4pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgX3RoaXMuY3VycmVudENvbm5lY3QgPSBjb25uOwogICAgICBfdGhpcy5kYXRhLmxpbmVMaXN0LmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsKICAgICAgICBpZiAoaXRlbS5mcm9tID09IGNvbm4uc291cmNlSWQgJiYgaXRlbS50byA9PSBjb25uLnRhcmdldElkKSB7CiAgICAgICAgICBfdGhpcy5jdXJyZW50TGluZSA9IGl0ZW07CiAgICAgICAgICBfdGhpcy5lZGl0VHlwZSA9ICdsaW5lJzsKICAgICAgICAgIF90aGlzLiRuZXh0VGljayhmdW5jdGlvbigpIHsKICAgICAgICAgICAgX3RoaXMuJHJlZnMubGluZUZvcm0uaW5pdChpdGVtKQogICAgICAgICAgfSkKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8v5Yig6Zmk57q/CiAgICBkZWxMaW5lKGNvbm4pIHsKICAgICAgdGhpcy4kY29uZmlybSgn56Gu5a6a5Yig6Zmk5omA54K55Ye755qE57q/5ZCXPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLmpzUGx1bWIuZGVsZXRlQ29ubmVjdGlvbihjb25uKQogICAgICB9KS5jYXRjaCgoKSA9PiB7fSkKICAgIH0sCiAgICAvLyDmmK/lkKblhbfmnInor6Xnur8KICAgIGhhc0xpbmUoZnJvbSwgdG8pIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmRhdGEubGluZUxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgbGluZSA9IHRoaXMuZGF0YS5saW5lTGlzdFtpXQogICAgICAgIGlmIChsaW5lLmZyb20gPT09IGZyb20gJiYgbGluZS50byA9PT0gdG8pIHsKICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBmYWxzZQogICAgfSwKICAgIC8vIOaYr+WQpuWQq+acieebuOWPjeeahOe6vwogICAgaGFzaE9wcG9zaXRlTGluZShmcm9tLCB0bykgewogICAgICByZXR1cm4gdGhpcy5oYXNMaW5lKHRvLCBmcm9tKQogICAgfSwKICAgIGxpbmVMYWJlbFNhdmUobGluZSkgewogICAgICB0aGlzLmN1cnJlbnRDb25uZWN0LmdldE92ZXJsYXkoImxhYmVsLTEiKS5zZXRMYWJlbChsaW5lLmxhYmVsKTsKICAgICAgLy90aGlzLiRzZXQodGhpcy5jdXJyZW50TGluZSwgJ2xhYmVsJywgbGluZS5sYWJlbCk7CiAgICB9LAogICAgZHJhZyhpdGVtKSB7CiAgICAgIHRoaXMuY3VycmVudEl0ZW0gPSBpdGVtOwogICAgfSwKICAgIGRyb3AoZXZlbnQpIHsKICAgICAgLy9ldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgX29iaiA9IHRoaXMuJHJlZnMuZmxvd0NvbnRlbnQ7CiAgICAgIHZhciB0ZW1wID0gewogICAgICAgIGlkOiB0aGlzLmdldFVVSUQoKSwKICAgICAgICBsYWJlbDogdGhpcy5jdXJyZW50SXRlbS5uYW1lLAogICAgICAgIHRvcDogZXZlbnQub2Zmc2V0WSArICdweCcsCiAgICAgICAgbGVmdDogZXZlbnQub2Zmc2V0WCArICdweCcsCiAgICAgICAgVHlwZTogdGhpcy5jdXJyZW50SXRlbS50eXBlCiAgICAgIH0KICAgICAgdGhpcy5hZGROb2RlKHRlbXApOwogICAgICB0aGlzLmVkaXROb2RlKHRlbXAuaWQpOwogICAgfSwKICAgIGFsbG93RHJvcChldmVudCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpCiAgICB9LAogICAgZ2V0VVVJRCgpIHsKICAgICAgdmFyIHMgPSBbXTsKICAgICAgdmFyIGhleERpZ2l0cyA9ICIwMTIzNDU2Nzg5YWJjZGVmIjsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzNjsgaSsrKSB7CiAgICAgICAgc1tpXSA9IGhleERpZ2l0cy5zdWJzdHIoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMHgxMCksIDEpOwogICAgICB9CiAgICAgIHNbMTRdID0gIjQiOyAvLyBiaXRzIDEyLTE1IG9mIHRoZSB0aW1lX2hpX2FuZF92ZXJzaW9uIGZpZWxkIHRvIDAwMTAKICAgICAgc1sxOV0gPSBoZXhEaWdpdHMuc3Vic3RyKChzWzE5XSAmIDB4MykgfCAweDgsIDEpOyAvLyBiaXRzIDYtNyBvZiB0aGUgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZCB0byAwMQogICAgICBzWzhdID0gc1sxM10gPSBzWzE4XSA9IHNbMjNdID0gIi0iOwogICAgICB2YXIgdXVpZCA9IHMuam9pbigiIik7CiAgICAgIHJldHVybiB1dWlkOwogICAgfSwKICAgIHNhdmVEYXRhKCkgewogICAgICAvL2NvbnNvbGUubG9nKHRoaXMuanNQbHVtYikKICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmpzUGx1bWIuRGVmYXVsdHMpCiAgICAgIC8vY29uc29sZS5sb2coJ+e6vycsIHRoaXMuanNQbHVtYi5nZXRDb25uZWN0aW9ucygpKQogICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGEpOwogICAgfSwKICAgIGVkaXRGbG93KCkgewogICAgICB0aGlzLmVkaXRUeXBlID0gJ2Zsb3cnOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpIHsKICAgICAgICB0aGlzLiRyZWZzLmZsb3dFZGl0LmluaXQodGhpcy5kYXRhLmZsb3dJbmZvKTsKICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["flowMain.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"flowMain.vue","sourceRoot":"src/views/H-Technological/components","sourcesContent":["<template>\r\n  <div class=\"appcontainer\">\r\n    <div class=\"flow-menu\">\r\n      <div class=\"menu-item\" v-for=\"item in menueList\" :key=\"item.id\" draggable=\"true\" @dragstart=\"drag(item)\">\r\n        <i :class=\"item.icon\"></i>\r\n        <div>{{item.name}}</div>\r\n      </div>\r\n      <hr>\r\n      <div class=\"menu-item\" @click=\"isConnect=true\">\r\n        <i class=\"el-icon-bottom-right\"></i>\r\n        <div>连线</div>\r\n      </div>\r\n      <div class=\"menu-item\" @click=\"isConnect=false\">\r\n        <i class=\"el-icon-rank\"></i>\r\n        <div>选择</div>\r\n      </div>\r\n\r\n    </div>\r\n    <div class=\"flow-detail\">\r\n      <div id=\"flowContent\"\r\n           ref=\"flowContent\"\r\n           @drop=\"drop($event)\"\r\n           @dragover=\"allowDrop($event)\"\r\n           @click=\"editFlow()\"\r\n           @dblclick=\"isConnect=false\">\r\n        <flowNode v-for=\"node in data.nodeList\" :key=\"node.id\"\r\n                  :node=\"node\"\r\n                  :id=\"node.id\"\r\n                  :isconnect=\"isConnect\"\r\n                  @delete-node=\"deleteNode\"\r\n                  @change-node-site=\"changeNodeSite\"\r\n                  @edit-node=\"editNode\">\r\n        </flowNode>\r\n      </div>\r\n      <div class=\"savebtn\">\r\n        <el-button type=\"primary\" size=\"mini\" @click=\"saveData()\">保 存</el-button>\r\n      </div>\r\n    </div>\r\n    <div class=\"flow-edit\">\r\n      <div class=\"flow-edit-content\">\r\n        <edit-flow ref=\"flowEdit\" v-show=\"editType=='flow'\"></edit-flow>\r\n        <edit-node ref=\"nodeForm\" v-show=\"editType=='node'\"></edit-node>\r\n        <edit-line ref=\"lineForm\" v-show=\"editType=='line'\" @line-save=\"lineLabelSave\"></edit-line>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {jsPlumb} from 'jsplumb'\r\n  import flowNode from './flowNode.vue'\r\n  import editFlow from './editFlow.vue'\r\n  import editNode from './editNode.vue'\r\n  import editLine from './editLine.vue'\r\n  export default {\r\n    name: 'flowMain',\r\n    data() {\r\n      return {\r\n        menueList: [{\r\n            type: 1,\r\n            name: '起点',\r\n            \r\n          },\r\n          {\r\n            type: 2,\r\n            name: '终点',\r\n          },\r\n          \r\n        ],\r\n        jsPlumb: null, // jsPlumb 实例\r\n        index: 1,\r\n        // 默认设置参数\r\n        jsplumbSetting: {\r\n          // 动态锚点、位置自适应\r\n          Anchors: ['Top', 'TopCenter', 'TopRight', 'TopLeft', 'Right', 'RightMiddle', 'Bottom', 'BottomCenter',\r\n            'BottomRight', 'BottomLeft', 'Left', 'LeftMiddle'\r\n          ],\r\n          Container: 'flowContent',\r\n          // 连线的样式 StateMachine、Flowchart,有四种默认类型：Bezier（贝塞尔曲线），Straight（直线），Flowchart（流程图），State machine（状态机）\r\n          Connector: 'Straight',\r\n          //这个是鼠标拉出来的线的属性\r\n          ConnectionOverlays: [\r\n            [\"Label\", {\r\n              label: \"连线文本\",\r\n              id: \"label-1\",\r\n              cssClass: \"csslabel\"\r\n            }]\r\n          ],\r\n          // 鼠标不能拖动删除线\r\n          ConnectionsDetachable: false,\r\n          // 删除线的时候节点不删除\r\n          DeleteEndpointsOnDetach: false,\r\n          // 连线的端点\r\n          // Endpoint: [\"Dot\", {radius: 5}],\r\n          Endpoint: [\"Rectangle\", {\r\n            height: 10,\r\n            width: 10\r\n          }],\r\n          // 线端点的样式\r\n          EndpointStyle: {\r\n            fill: 'rgba(255,255,255,0)',\r\n            outlineWidth: 1\r\n          },\r\n          LogEnabled: true, //是否打开jsPlumb的内部日志记录\r\n          // 绘制线\r\n          PaintStyle: {\r\n            stroke: '#409eff',\r\n            strokeWidth: 2\r\n          },\r\n          // 绘制箭头\r\n          Overlays: [\r\n            ['Arrow', {\r\n              width: 8,\r\n              length: 8,\r\n              location: 1\r\n            }],\r\n          ],\r\n          RenderMode: \"svg\"\r\n        },\r\n        // jsplumb连接参数\r\n        jsplumbConnectOptions: {\r\n          isSource: true,\r\n          isTarget: true,\r\n          // 动态锚点、提供了4个方向 Continuous、AutoDefault\r\n          anchor: \"Continuous\",\r\n        },\r\n        jsplumbSourceOptions: {\r\n          filter: \".flow-node-drag\",  //触发连线的区域\r\n          /*\"span\"表示标签，\".className\"表示类，\"#id\"表示元素id*/\r\n          filterExclude: false,\r\n          anchor: \"Continuous\",\r\n          allowLoopback: false\r\n        },\r\n        jsplumbTargetOptions: {\r\n          filter: \".flow-node-drag\",\r\n          /*\"span\"表示标签，\".className\"表示类，\"#id\"表示元素id*/\r\n          filterExclude: false,\r\n          anchor: \"Continuous\",\r\n          allowLoopback: false\r\n        },\r\n        // 是否加载完毕\r\n        loadEasyFlowFinish: false,\r\n        // 数据\r\n        data: {\r\n          flowInfo: {\r\n            Id: this.getUUID(),\r\n            Name: '我的流程',\r\n            Remark: '',\r\n          },\r\n          nodeList: [],\r\n          lineList: []\r\n        },\r\n        currentItem: '', //临时存添加的元素\r\n        isConnect: false, //判断是否连接\r\n        timer: null, //定时器,判断单双击,\r\n        currentConnect: '', //当前的连接线\r\n        currentLine: '', //当前连接线数据\r\n        editType: '', //编辑的类型\r\n      }\r\n    },\r\n    components: {\r\n      flowNode,\r\n      editFlow,\r\n      editNode,\r\n      editLine\r\n    },\r\n    created() {},\r\n    mounted() {\r\n      this.jsPlumb = jsPlumb.getInstance();\r\n      this.$nextTick(() => {\r\n        this.init();\r\n      });\r\n      this.editFlow()\r\n    },\r\n    methods: {\r\n      init() {\r\n        const _this = this\r\n        this.jsPlumb.ready(function() {\r\n\r\n          // 导入默认配置\r\n          _this.jsPlumb.importDefaults(_this.jsplumbSetting)\r\n          // 会使整个jsPlumb立即重绘。\r\n          _this.jsPlumb.setSuspendDrawing(false, true);\r\n          // 初始化节点\r\n          _this.loadEasyFlow()\r\n\r\n          // 单点连接线（编辑label）,\r\n          _this.jsPlumb.bind('click', function(conn, originalEvent) {\r\n            //clearTimeout(this.timer);\r\n            //this.timer = setTimeout(function () { // 这里采用执行自定义事件的方式\r\n            //    console.log(\"click\", conn);\r\n            //    _this.editLine(conn);\r\n            //}, 300); // 延迟300ms执行单击事件,区分双击事件\r\n            console.log(\"click\", conn);\r\n            _this.editLine(conn);\r\n            console.log(conn.getOverlay(\"label-1\"));\r\n            //conn.getOverlay(\"label-1\").setLabel('大肥肚'); //初始化label\r\n          })\r\n          // 双击连接线（删除）,\r\n          _this.jsPlumb.bind('dblclick', function (conn, originalEvent) {\r\n             clearTimeout(this.timer);\r\n             console.log(\"dblclick\", conn)\r\n\r\n             _this.$confirm('确定删除所点击的线吗?', '提示', {\r\n                 confirmButtonText: '确定',\r\n                 cancelButtonText: '取消',\r\n                 type: 'warning'\r\n             }).then(() => {\r\n                 _this.jsPlumb.deleteConnection(conn)\r\n             }).catch(() => { })\r\n          })\r\n          // 连线\r\n          _this.jsPlumb.bind(\"connection\", function(evt) {\r\n            console.log('connection', evt)\r\n            let from = evt.source.id\r\n            let to = evt.target.id\r\n            if (_this.loadEasyFlowFinish) {\r\n              _this.data.lineList.push({\r\n                from: from,\r\n                to: to,\r\n                label: '连线名称',\r\n                id: _this.getUUID(),\r\n                Remark: '',\r\n              })\r\n            };\r\n            setTimeout(function() {\r\n              _this.editLine(evt.connection);\r\n            }, 100);\r\n          })\r\n\r\n          // 删除连线\r\n          _this.jsPlumb.bind(\"connectionDetached\", function(evt) {\r\n            console.log('connectionDetached', evt)\r\n            _this.deleteLine(evt.sourceId, evt.targetId)\r\n          })\r\n\r\n          // 改变线的连接节点\r\n          _this.jsPlumb.bind(\"connectionMoved\", function(evt) {\r\n            console.log('connectionMoved', evt)\r\n            _this.changeLine(evt.originalSourceId, evt.originalTargetId)\r\n          })\r\n\r\n          // 单击endpoint\r\n          // jsPlumb.bind(\"endpointClick\", function (evt) {\r\n          //   console.log('endpointClick', evt)\r\n          // })\r\n          //\r\n          // // 双击endpoint\r\n          // jsPlumb.bind(\"endpointDblClick\", function (evt) {\r\n          //   console.log('endpointDblClick', evt)\r\n          // })\r\n\r\n          // contextmenu 右键\r\n          _this.jsPlumb.bind(\"contextmenu\", function(evt) {\r\n            console.log('contextmenu', evt)\r\n          })\r\n\r\n\r\n          // beforeDrop\r\n          _this.jsPlumb.bind(\"beforeDrop\", function(evt) {\r\n            console.log('beforeDrop', evt)\r\n            let from = evt.sourceId\r\n            let to = evt.targetId\r\n            if (from === to) {\r\n              _this.$message.error('不能连接自己');\r\n              return false\r\n            }\r\n            if (_this.hasLine(from, to)) {\r\n              _this.$message.error('不能重复连线');\r\n              return false\r\n            }\r\n            if (_this.hashOppositeLine(from, to)) {\r\n              _this.$message.error('不能回环哦');\r\n              return false\r\n            }\r\n            return true\r\n          })\r\n\r\n          // beforeDetach\r\n          _this.jsPlumb.bind(\"beforeDetach\", function(evt) {\r\n            console.log('beforeDetach', evt)\r\n          })\r\n        })\r\n\r\n      },\r\n      // 加载流程图\r\n      loadEasyFlow() {\r\n\r\n        // 初始化节点\r\n        for (var i = 0; i < this.data.nodeList.length; i++) {\r\n          let node = this.data.nodeList[i]\r\n          // 设置源点，可以拖出线连接其他节点\r\n          this.jsPlumb.makeSource(node.id, this.jsplumbSourceOptions)\r\n          // // 设置目标点，其他源点拖出的线可以连接该节点\r\n          this.jsPlumb.makeTarget(node.id, this.jsplumbTargetOptions)\r\n          // jsPlumb.addEndpoint(node.id)\r\n          // 设置可拖拽\r\n          // jsPlumb.draggable(node.id, {\r\n          //     containment: 'parent',\r\n          //     grid: [10, 10]\r\n          // })\r\n\r\n          this.jsPlumb.draggable(node.id, {\r\n            containment: 'parent'\r\n          })\r\n\r\n          // jsPlumb.draggable(node.id)\r\n        }\r\n\r\n        // 初始化连线\r\n        for (var i = 0; i < this.data.lineList.length; i++) {\r\n          let line = this.data.lineList[i]\r\n          let connection = this.jsPlumb.connect({\r\n            source: line.from,\r\n            target: line.to,\r\n          }, this.jsplumbConnectOptions);\r\n\r\n          connection.getOverlay(\"label-1\").setLabel(line.label); //初始化label\r\n        }\r\n        this.$nextTick(function() {\r\n          this.loadEasyFlowFinish = true\r\n        })\r\n      },\r\n      // 添加新的节点\r\n      addNode(temp) {\r\n        console.log('添加节点', temp)\r\n        this.data.nodeList.push(temp);\r\n        this.$nextTick(function() {\r\n          this.jsPlumb.makeSource(temp.id, this.jsplumbSourceOptions)\r\n          this.jsPlumb.makeTarget(temp.id, this.jsplumbTargetOptions)\r\n          this.jsPlumb.draggable(temp.id, {\r\n            containment: 'parent'\r\n          })\r\n\r\n        })\r\n      },\r\n      // 删除线\r\n      deleteLine(from, to) {\r\n        this.data.lineList = this.data.lineList.filter(function(line) {\r\n          return line.from !== from && line.to !== to\r\n        })\r\n      },\r\n      // 改变连线\r\n      changeLine(oldFrom, oldTo) {\r\n        this.deleteLine(oldFrom, oldTo)\r\n      },\r\n      // 改变节点的位置\r\n      changeNodeSite(data) {\r\n        for (var i = 0; i < this.data.nodeList.length; i++) {\r\n          let node = this.data.nodeList[i]\r\n          if (node.id === data.nodeId) {\r\n            node.left = data.left\r\n            node.top = data.top\r\n          }\r\n        }\r\n      },\r\n      //删除节点\r\n      deleteNode(nodeId) {\r\n        this.$confirm('确定要删除节点' + nodeId + '?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning',\r\n          closeOnClickModal: false\r\n        }).then(() => {\r\n          // this.data.nodeList = this.data.nodeList.filter(function(node) {\r\n          // \tif (node.id === nodeId) {\r\n          // \t\tnode.show = false\r\n          // \t}\r\n          // \treturn true\r\n          // })\r\n          this.data.nodeList.forEach((item, index) => {\r\n            if (item.id === nodeId) {\r\n              this.data.nodeList.splice(index, 1);\r\n            }\r\n          })\r\n\r\n          this.$nextTick(function() {\r\n            console.log('删除' + nodeId)\r\n            this.jsPlumb.removeAllEndpoints(nodeId);\r\n          })\r\n        }).catch(() => {})\r\n        return true\r\n      },\r\n      //编辑节点\r\n      editNode(nodeId) {\r\n        //console.log('编辑节点', nodeId)\r\n        this.editType = 'node';\r\n        this.$nextTick(function() {\r\n          this.$refs.nodeForm.init(this.data, nodeId)\r\n        })\r\n      },\r\n      editLine(conn) {\r\n        var _this = this;\r\n        _this.currentConnect = conn;\r\n        _this.data.lineList.forEach(function(item, index) {\r\n          if (item.from == conn.sourceId && item.to == conn.targetId) {\r\n            _this.currentLine = item;\r\n            _this.editType = 'line';\r\n            _this.$nextTick(function() {\r\n              _this.$refs.lineForm.init(item)\r\n            })\r\n            return;\r\n          }\r\n        });\r\n      },\r\n      //删除线\r\n      delLine(conn) {\r\n        this.$confirm('确定删除所点击的线吗?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          this.jsPlumb.deleteConnection(conn)\r\n        }).catch(() => {})\r\n      },\r\n      // 是否具有该线\r\n      hasLine(from, to) {\r\n        for (var i = 0; i < this.data.lineList.length; i++) {\r\n          var line = this.data.lineList[i]\r\n          if (line.from === from && line.to === to) {\r\n            return true\r\n          }\r\n        }\r\n        return false\r\n      },\r\n      // 是否含有相反的线\r\n      hashOppositeLine(from, to) {\r\n        return this.hasLine(to, from)\r\n      },\r\n      lineLabelSave(line) {\r\n        this.currentConnect.getOverlay(\"label-1\").setLabel(line.label);\r\n        //this.$set(this.currentLine, 'label', line.label);\r\n      },\r\n      drag(item) {\r\n        this.currentItem = item;\r\n      },\r\n      drop(event) {\r\n        //event.preventDefault();\r\n        var _obj = this.$refs.flowContent;\r\n        var temp = {\r\n          id: this.getUUID(),\r\n          label: this.currentItem.name,\r\n          top: event.offsetY + 'px',\r\n          left: event.offsetX + 'px',\r\n          Type: this.currentItem.type\r\n        }\r\n        this.addNode(temp);\r\n        this.editNode(temp.id);\r\n      },\r\n      allowDrop(event) {\r\n        event.preventDefault()\r\n      },\r\n      getUUID() {\r\n        var s = [];\r\n        var hexDigits = \"0123456789abcdef\";\r\n        for (var i = 0; i < 36; i++) {\r\n          s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\r\n        }\r\n        s[14] = \"4\"; // bits 12-15 of the time_hi_and_version field to 0010\r\n        s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\r\n        s[8] = s[13] = s[18] = s[23] = \"-\";\r\n        var uuid = s.join(\"\");\r\n        return uuid;\r\n      },\r\n      saveData() {\r\n        //console.log(this.jsPlumb)\r\n        //console.log(this.jsPlumb.Defaults)\r\n        //console.log('线', this.jsPlumb.getConnections())\r\n        console.log(this.data);\r\n      },\r\n      editFlow() {\r\n        this.editType = 'flow';\r\n        this.$nextTick(function() {\r\n          this.$refs.flowEdit.init(this.data.flowInfo);\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .appcontainer {\r\n    display: flex;\r\n    height: calc(100vh - 20px);\r\n    color: #606266;\r\n  }\r\n\r\n  .flow-detail {\r\n    flex: 1;\r\n    border: 1px solid #EBEEF5;\r\n    padding: 12px;\r\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, .1);\r\n    word-break: break-all;\r\n    border-radius: 4px;\r\n    position: relative;\r\n  }\r\n\r\n  #flowContent {\r\n    width: 100%;\r\n    height: 100%;\r\n    position: relative;\r\n  }\r\n\r\n  .item {\r\n    position: absolute;\r\n    width: 60px;\r\n    height: 90px;\r\n    border: 1px solid #007AFF;\r\n  }\r\n\r\n  .flow-menu {\r\n    width: 100px;\r\n    padding: 10px;\r\n    margin: 0 10px;\r\n    border: 1px solid #EBEEF5;\r\n    padding: 12px;\r\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, .1);\r\n    word-break: break-all;\r\n    border-radius: 4px;\r\n  }\r\n\r\n  .menu-item {\r\n    text-align: center;\r\n    box-shadow: 0 0 4px #696969;\r\n    margin-bottom: 8px;\r\n    cursor: pointer;\r\n    font-size: 14px;\r\n    color: #606266;\r\n    padding: 5px 0;\r\n    border-radius: 5px;\r\n  }\r\n\r\n  .menu-item>i {\r\n    font-size: 30px;\r\n  }\r\n\r\n  .flow-edit {\r\n    width: 300px;\r\n    padding: 0 10px;\r\n  }\r\n\r\n  .flow-edit-content {\r\n    background: #FFF;\r\n    color: #606266;\r\n    line-height: 1.4;\r\n    text-align: justify;\r\n    font-size: 14px;\r\n    border: 1px solid #EBEEF5;\r\n    padding: 12px;\r\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, .1);\r\n    word-break: break-all;\r\n    border-radius: 4px;\r\n  }\r\n  .csslabel {\r\n        color: #434343;\r\n        font-weight: 400;\r\n        z-index: 10;\r\n        font-size: 12px;\r\n        color: #409eff;\r\n        background: #fff;\r\n    }\r\n    .csslabel .label-text {\r\n        background-color: white;\r\n    }\r\n  .savebtn {\r\n    position: absolute;\r\n    top: 5px;\r\n    right: 5px;\r\n  }\r\n</style>\r\n"]}]}